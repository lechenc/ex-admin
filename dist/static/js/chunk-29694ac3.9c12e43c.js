(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29694ac3"],{"0248":function(e,t,r){"use strict";var n=r("2884"),i=r.n(n);i.a},"20d6":function(e,t,r){"use strict";var n=r("5ca1"),i=r("0a49")(6),a="findIndex",o=!0;a in[]&&Array(1)[a]((function(){o=!1})),n(n.P+n.F*o,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")(a)},2884:function(e,t,r){},"469f":function(e,t,r){r("6c1c"),r("1654"),e.exports=r("7d7b")},"504c":function(e,t,r){var n=r("9e1e"),i=r("0d58"),a=r("6821"),o=r("52a7").f;e.exports=function(e){return function(t){var r,s=a(t),l=i(s),u=l.length,c=0,d=[];while(u>c)r=l[c++],n&&!o.call(s,r)||d.push(e?[r,s[r]]:s[r]);return d}}},"5d73":function(e,t,r){e.exports=r("469f")},"5d8a":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"menu-title"},[r("el-row",[r("el-col",{staticStyle:{"text-align":"right","margin-top":"100px","margin-bottom":"30px"},attrs:{span:22}},[r("el-button",{attrs:{disabled:!e.isCURDAuth,size:"medium",type:"primary"},on:{click:e.addMenu}},[e._v("创建一级菜单")])],1)],1),e._v(" "),r("el-tree",{ref:"elTree",attrs:{draggable:"","allow-drop":e.collapse,data:e.treeData,"node-key":"id",props:e.defaultProps,"expand-on-click-node":!1,"default-expanded-keys":e.defaultKeyArray},on:{"node-drop":e.sort},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,i=t.data;return r("span",{staticClass:"custom-tree-node"},[r("span",{staticClass:"sac-label"},[e._v(" "+e._s(n.label)+" "),r("i",{directives:[{name:"show",rawName:"v-show",value:i.describe,expression:"data.describe"}],staticClass:"el-icon-info sac-icon",on:{click:function(t){return e.showDescription(i.describe)}}})]),e._v(" "),r("span",{staticClass:"sac-btn"},[r("el-button",{attrs:{disabled:!e.isCURDAuth,type:"text",size:"mini"},on:{click:function(){return e.append(n,i)}}},[e._v(" 新增 ")]),e._v(" "),r("el-button",{attrs:{disabled:!e.isCURDAuth,type:"text",size:"mini"},on:{click:function(){return e.modify(n,i)}}},[e._v(" 修改 ")]),e._v(" "),r("el-button",{attrs:{disabled:!e.isCURDAuth,type:"text",size:"mini"},on:{click:function(){return e.remove(n,i)}}},[e._v(" 删除 ")])],1)])}}])}),e._v(" "),r("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"排序:"}},[r("el-input-number",{attrs:{size:"small",min:0},model:{value:e.ruleForm.position,callback:function(t){e.$set(e.ruleForm,"position",t)},expression:"ruleForm.position"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"接口url:",prop:"requestUrl"}},[r("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.requestUrl,callback:function(t){e.$set(e.ruleForm,"requestUrl",t)},expression:"ruleForm.requestUrl"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"功能名称:",prop:"name"}},[r("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"页面路由:",prop:"menuUrl"}},[r("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.menuUrl,callback:function(t){e.$set(e.ruleForm,"menuUrl",t)},expression:"ruleForm.menuUrl"}})],1),e._v(" "),r("el-form-item",{staticStyle:{position:"relative"},attrs:{label:"描述:",prop:"desctext"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入描述"},model:{value:e.ruleForm.desctext,callback:function(t){e.$set(e.ruleForm,"desctext",t)},expression:"ruleForm.desctext"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"medium"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"medium",loading:e.btnLoading},on:{click:e.determine}},[e._v("确 定")])],1)],1)],1)},i=[],a=(r("ac4d"),r("8a81"),r("5df3"),r("1c4c"),r("6b54"),r("20d6"),r("768b")),o=(r("ffc1"),r("ac6a"),r("96cf"),r("3b8d")),s=(r("7f7f"),r("4ec3"));function l(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=u(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i,a=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}function u(e,t){if(e){if("string"===typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d={name:"Menu",data:function(){return{isAdd:!0,isCURDAuth:!0,btnLoading:!1,treeData:[],dialogFormVisible:!1,ruleForm:{position:0,requestUrl:"",name:"",menuUrl:"",parentId:"",desctext:"",userType:0},defaultProps:{children:"children",label:"name"},rules:{requestUrl:[{required:!0,message:"请输入请求url",trigger:"blur"}],name:[{required:!0,message:"请输入功能名称",trigger:"blur"}],menuUrl:[{required:!1,message:"请输入页面路由",trigger:"blur"}],desctext:[{required:!0,message:"请输入功能名称",trigger:"blur"}]},currentNode:"",currentData:"",dialogTitle:"创建一级菜单",currentForm:{},defaultKeyArray:[],nodeId:null}},methods:{resetFields:function(){var e=this;this.$nextTick((function(){e.ruleForm={position:0,requestUrl:"",name:"",menuUrl:"",parentId:"",desctext:""},e.$refs.ruleForm.resetFields()}))},addMenu:function(){this.dialogTitle="创建一级菜单",this.dialogFormVisible=!0,this.currentNode="",this.nodeId=null,this.resetFields()},append:function(e,t){this.nodeId=e.key,this.dialogTitle="创建 ".concat(t.name," 的子菜单"),this.dialogFormVisible=!0,this.currentNode=e,this.currentData=t,this.resetFields()},modify:function(e,t){this.nodeId=e.id,this.dialogTitle="修改 ".concat(t.name," 菜单"),this.dialogFormVisible=!0,this.ruleForm=JSON.parse(JSON.stringify(t)),this.ruleForm.desctext=this.ruleForm.desctext,this.currentForm=JSON.parse(JSON.stringify(t)),this.currentForm.desctext=this.currentForm.desctext},collapse:function(e,t,r){return 1==e.level&&1==t.level||2==e.level&&2==t.level&&e.parent.id==t.parent.id?void 0==e.nextSibling?"prev"==r:void 0==t.nextSibling?"next"==r:e.nextSibling.id!==t.id?"prev"==r:"next"==r:void 0},sort:function(e,t,r,n){var i={aboveId:"",arr:[]};i.aboveId=t.data.id;var a,o=l(t.parent.childNodes);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.arr.push(s.data.id)}}catch(u){o.e(u)}finally{o.f()}this.updateOrderMe(i)},updateOrderMe:function(e){},determine:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs.ruleForm.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var n,i,o,l,u,c,d,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=25;break}if(!t.ruleForm.id){e.next=17;break}if(n={},Object.entries(t.ruleForm).forEach((function(e){var r=Object(a["a"])(e,2),i=r[0],o=r[1];o!=t.currentForm[i]&&"children"!=i&&(n[i]=o||"empty")})),!(Object.entries(n).length>0)){e.next=14;break}return n.id=t.ruleForm.id,t.btnLoading=!0,e.next=9,s["a"].editMenu(n);case 9:i=e.sent,i&&(t.$message({title:"成功",message:"修改 ".concat(t.ruleForm.name," 菜单成功"),type:"success"}),t.resetFields(),t.getAllSysUrl(),t.dialogFormVisible=!1),t.btnLoading=!1,e.next=15;break;case 14:t.$message({title:"提示",message:"未修改任何项",type:"success"});case 15:e.next=23;break;case 17:return t.currentNode?(o=t.currentNode.parent,l=o.data.children||o.data,u=l.findIndex((function(e){return e.id===t.currentData.id})),c=l[u],t.ruleForm.parentId=c.id):t.ruleForm.parentId=0,d=Object.assign({userType:0},t.ruleForm),e.next=21,s["a"].addMenu(d);case 21:m=e.sent,m&&(t.$message({title:"成功",message:"创建".concat(t.ruleForm.name,"菜单成功"),type:"success"}),t.getAllSysUrl(),t.resetFields(),t.dialogFormVisible=!1);case 23:e.next=26;break;case 25:return e.abrupt("return",!1);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),remove:function(e,t){var r=this;t.children.length>0?this.$message.error({title:"错误",message:"请先删除子菜单！"}):this.$confirm("此操作将永久删除该菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,s["a"].deleteMenu({id:t.id});case 2:i=n.sent,i&&(r.$message({title:"成功",message:"删除".concat(t.name,"菜单成功"),type:"success"}),r.nodeId=e.parent.key,r.getAllSysUrl());case 4:case"end":return n.stop()}}),n)})))).catch((function(){r.$message({type:"info",message:"已取消删除"})}))},getAllSysUrl:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getMenuList({userType:0});case 2:t=e.sent,t&&(this.defaultKeyArray=this.nodeId?[this.nodeId]:[],this.treeData=t.data.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showDescription:function(e){this.$alert(e,"描述",{showClose:!1,closeOnClickModal:!1}).catch((function(){}))}},created:function(){this.getAllSysUrl()},mounted:function(){var e=this.$util.getAuthority("Menu",[],[]);this.isAdd=e.isAdd,this.isCURDAuth=e.isModify}},m=d,f=(r("0248"),r("0c7c")),p=Object(f["a"])(m,n,i,!1,null,null,null);t["default"]=p.exports},"768b":function(e,t,r){"use strict";var n=r("a745"),i=r.n(n);function a(e){if(i()(e))return e}var o=r("5d73"),s=r.n(o),l=r("c8bb"),u=r.n(l),c=r("67bb"),d=r.n(c);function m(e,t){if("undefined"!==typeof d.a&&u()(Object(e))){var r=[],n=!0,i=!1,a=void 0;try{for(var o,l=s()(e);!(n=(o=l.next()).done);n=!0)if(r.push(o.value),t&&r.length===t)break}catch(c){i=!0,a=c}finally{try{n||null==l["return"]||l["return"]()}finally{if(i)throw a}}return r}}var f=r("e630");function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){return a(e)||m(e,t)||Object(f["a"])(e,t)||p()}r.d(t,"a",(function(){return h}))},"7d7b":function(e,t,r){var n=r("e4ae"),i=r("7cd6");e.exports=r("584a").getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},ffc1:function(e,t,r){var n=r("5ca1"),i=r("504c")(!0);n(n.S,"Object",{entries:function(e){return i(e)}})}}]);