(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69332866"],{"6f62":function(e,i,t){},7345:function(e,i,t){"use strict";t.r(i);var o=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"voucherParameters-container"},[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"180px",rules:e.rules,size:"medium"}},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"box-card-con"},[t("el-form-item",{attrs:{label:"全局维护开关：",prop:"globalSwitch"}},[t("el-col",{attrs:{span:8}},[t("el-switch",{attrs:{disabled:!e.isModify,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.form.globalSwitch,callback:function(i){e.$set(e.form,"globalSwitch",i)},expression:"form.globalSwitch"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"中文Android维护专用图：",prop:"androidPicCn"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{disabled:!e.isModify,size:"small",placeholder:"请选择上传"},model:{value:e.form.androidPicCn,callback:function(i){e.$set(e.form,"androidPicCn",i)},expression:"form.androidPicCn"}},[t("el-upload",{ref:"androidPicCn",attrs:{slot:"append",disabled:!e.isModify,action:e.$img_api,multiple:"",data:{type:"exchange"},name:"file",accept:".jpg,.png",limit:1,"before-upload":e.beforeUpload,"show-file-list":!1,"on-success":e.upload,"on-error":e.uploadCompressError,"on-exceed":e.exceed},slot:"append"},[t("el-button",{attrs:{disabled:!e.isModify,size:"small",type:"primary"},on:{click:function(i){return e.uploadBtn("androidPicCn")}}},[e._v("点击上传")])],1)],1)],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"英文Android维护专用图：",prop:"androidPicEn"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{disabled:!e.isModify,size:"small",placeholder:"请选择上传"},model:{value:e.form.androidPicEn,callback:function(i){e.$set(e.form,"androidPicEn",i)},expression:"form.androidPicEn"}},[t("el-upload",{ref:"androidPicEn",attrs:{slot:"append",disabled:!e.isModify,action:e.$img_api,multiple:"",data:{type:"exchange"},name:"file",accept:".jpg,.png",limit:1,"before-upload":e.beforeUpload,"show-file-list":!1,"on-success":e.upload,"on-error":e.uploadCompressError,"on-exceed":e.exceed},slot:"append"},[t("el-button",{attrs:{disabled:!e.isModify,size:"small",type:"primary"},on:{click:function(i){return e.uploadBtn("androidPicEn")}}},[e._v("点击上传")])],1)],1)],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"中文IOS维护专用图：",prop:"iosPicCn"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{disabled:!e.isModify,size:"small",placeholder:"请选择上传"},model:{value:e.form.iosPicCn,callback:function(i){e.$set(e.form,"iosPicCn",i)},expression:"form.iosPicCn"}},[t("el-upload",{ref:"iosPicCn",attrs:{slot:"append",disabled:!e.isModify,action:e.$img_api,multiple:"",data:{type:"exchange"},name:"file",accept:".jpg,.png",limit:1,"before-upload":e.beforeUpload,"show-file-list":!1,"on-success":e.upload,"on-error":e.uploadCompressError,"on-exceed":e.exceed},slot:"append"},[t("el-button",{attrs:{disabled:!e.isModify,size:"small",type:"primary"},on:{click:function(i){return e.uploadBtn("iosPicCn")}}},[e._v("点击上传")])],1)],1)],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"英文IOS维护专用图：",prop:"iosPicEn"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{disabled:!e.isModify,size:"small",placeholder:"请选择上传"},model:{value:e.form.iosPicEn,callback:function(i){e.$set(e.form,"iosPicEn",i)},expression:"form.iosPicEn"}},[t("el-upload",{ref:"iosPicEn",attrs:{slot:"append",disabled:!e.isModify,action:e.$img_api,multiple:"",data:{type:"exchange"},name:"file",accept:".jpg,.png",limit:1,"before-upload":e.beforeUpload,"show-file-list":!1,"on-success":e.upload,"on-error":e.uploadCompressError,"on-exceed":e.exceed},slot:"append"},[t("el-button",{attrs:{disabled:!e.isModify,size:"small",type:"primary"},on:{click:function(i){return e.uploadBtn("iosPicEn")}}},[e._v("点击上传")])],1)],1)],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"中文PC维护专用图：",prop:"pcPicCn"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{disabled:!e.isModify,size:"small",placeholder:"请选择上传"},model:{value:e.form.pcPicCn,callback:function(i){e.$set(e.form,"pcPicCn",i)},expression:"form.pcPicCn"}},[t("el-upload",{ref:"pcPicCn",attrs:{slot:"append",disabled:!e.isModify,action:e.$img_api,multiple:"",data:{type:"exchange"},name:"file",accept:".jpg,.png",limit:1,"before-upload":e.beforeUpload,"show-file-list":!1,"on-success":e.upload,"on-error":e.uploadCompressError,"on-exceed":e.exceed},slot:"append"},[t("el-button",{attrs:{disabled:!e.isModify,size:"small",type:"primary"},on:{click:function(i){return e.uploadBtn("pcPicCn")}}},[e._v("点击上传")])],1)],1)],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"英文PC维护专用图：",prop:"pcPicEn"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{disabled:!e.isModify,size:"small",placeholder:"请选择上传"},model:{value:e.form.pcPicEn,callback:function(i){e.$set(e.form,"pcPicEn",i)},expression:"form.pcPicEn"}},[t("el-upload",{ref:"pcPicEn",attrs:{slot:"append",disabled:!e.isModify,action:e.$img_api,multiple:"",data:{type:"exchange"},name:"file",accept:".jpg,.png",limit:1,"before-upload":e.beforeUpload,"show-file-list":!1,"on-success":e.upload,"on-error":e.uploadCompressError,"on-exceed":e.exceed},slot:"append"},[t("el-button",{attrs:{disabled:!e.isModify,size:"small",type:"primary"},on:{click:function(i){return e.uploadBtn("pcPicEn")}}},[e._v("点击上传")])],1)],1)],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"中文标题：",prop:"titleCn"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{type:"text",placeholder:"请输入",disabled:!e.isModify},model:{value:e.form.titleCn,callback:function(i){e.$set(e.form,"titleCn","string"===typeof i?i.trim():i)},expression:"form.titleCn"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"英文标题：",prop:"titleEn"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{type:"text",placeholder:"请输入",disabled:!e.isModify},model:{value:e.form.titleEn,callback:function(i){e.$set(e.form,"titleEn","string"===typeof i?i.trim():i)},expression:"form.titleEn"}})],1)],1),e._v(" "),t("b-two-date-timer",{ref:"twoTimer",attrs:{disabled:!e.isModify,labelWidth:e.labelWidth,labelWords:"维护时间",date1:e.form.gateStartTime,date2:e.form.gateEndTime},on:{"update:date1":function(i){return e.$set(e.form,"gateStartTime",i)},"update:date2":function(i){return e.$set(e.form,"gateEndTime",i)}}}),e._v(" "),t("el-form-item",{attrs:{label:"谷歌验证码：",prop:"googleCode"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{type:"text",placeholder:"请输入",disabled:!e.isModify},on:{input:function(i){return e.checkVal("googleCode","noDot")}},model:{value:e.form.googleCode,callback:function(i){e.$set(e.form,"googleCode",i)},expression:"form.googleCode"}})],1)],1)],1),e._v(" "),e.isCURDAuth?t("div",[e.isModify?e._e():t("div",{staticClass:"middle"},[t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(i){e.isModify=!0}}},[e._v("修改")])],1),e._v(" "),e.isModify?t("div",{staticClass:"middle"},[t("el-button",{attrs:{type:"primary",plain:"",size:"medium"},on:{click:e.cancelSend}},[e._v("取消")]),e._v(" "),t("el-button",{attrs:{type:"primary",size:"medium",loading:e.confirmLoading},on:{click:e.confirmSend}},[e._v("提交修改")])],1):e._e()]):e._e()])],1)],1)},r=[],a=(t("96cf"),t("3b8d")),n=(t("a481"),t("7f7f"),t("4ec3")),s=(t("ca00"),t("57d7")),l={components:{BTwoDateTimer:s["a"]},data:function(){return{isCURDAuth:!0,isModify:!1,listLoading:!1,confirmLoading:!1,list:[],labelWidth:"180px",key:"",form:{androidPicCn:"",androidPicEn:"",iosPicCn:"",iosPicEn:"",pcPicCn:"",pcPicEn:"",globalSwitch:!1,googleCode:"",titleCn:"",titleEn:"",gateStartTime:"",gateEndTime:"",id:""},rules:{androidPicCn:[{required:!0,message:"必填",trigger:"blur"}],androidPicEn:[{required:!0,message:"必填",trigger:"blur"}],iosPicCn:[{required:!0,message:"必填",trigger:"blur"}],iosPicEn:[{required:!0,message:"必填",trigger:"blur"}],pcPicCn:[{required:!0,message:"必填",trigger:"blur"}],pcPicEn:[{required:!0,message:"必填",trigger:"blur"}],googleCode:[{required:!0,message:"必填",trigger:"blur"}],titleCn:[{required:!0,message:"必填",trigger:"blur"}],titleEn:[{required:!0,message:"必填",trigger:"blur"}]}}},methods:{upload:function(e,i,t){this.$refs[this.key].handleRemove(i),this.form[this.key]=e.data[0].url},uploadBtn:function(e){this.key=e},exceed:function(e,i){this.$message.error("单次只能选择1个文件进行上传！")},uploadCompressError:function(){this.$message.error("文件上传失败")},beforeUpload:function(e){var i=e.name.substring(e.name.lastIndexOf(".")+1),t="png"===i,o="jpg"===i,r=e.size/1024/1024<4;return t||o||this.$message({message:"上传文件只能是 png、jpg格式!",type:"error"}),r||this.$message({message:"上传文件大小不能超过 4MB!",type:"error"}),t&&r||o&&r},cancelSend:function(){this.isModify=!1,this.getList()},checkVal:function(e,i){i&&(this.form[e]=(this.form[e]+"").replace(/[^\d]/g,"")),this.form[e]<0&&(this.form[e]=0)},getList:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var i,t,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.listLoading){e.next=2;break}return e.abrupt("return");case 2:return i={},this.listLoading=!0,e.next=6,n["a"].getMaintenanceList(i);case 6:t=e.sent,t&&(o=t.data.data,o.globalSwitch,this.form=o),this.listLoading=!1;case 9:case"end":return e.stop()}}),e,this)})));function i(){return e.apply(this,arguments)}return i}(),confirmSend:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs["form"].validate(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var o,r,a,s,l,c,d,p,u,f,m,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return o=i.form,r=o.androidPicCn,a=o.androidPicEn,s=o.iosPicCn,l=o.iosPicEn,c=o.pcPicCn,d=o.pcPicEn,p=o.globalSwitch,u=o.googleCode,f=o.id,m={androidPicCn:r,androidPicEn:a,iosPicCn:s,iosPicEn:l,pcPicCn:c,pcPicEn:d,globalSwitch:p,googleCode:u,id:f},e.next=5,n["a"].editMaintenance(m);case 5:g=e.sent,g&&(i.$message({message:"修改成功！",type:"success"}),i.getList(),i.isModify=!1),i.confirmLoading=!1;case 8:case"end":return e.stop()}}),e)})));return function(i){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)})));function i(){return e.apply(this,arguments)}return i}()},mounted:function(){var e=this.$util.getAuthority("Maintenance",[],[]);console.log("authObj",e),this.isCURDAuth=e.isModify,this.getList()}},c=l,d=(t("9fff"),t("0c7c")),p=Object(d["a"])(c,o,r,!1,null,null,null);i["default"]=p.exports},"9fff":function(e,i,t){"use strict";var o=t("6f62"),r=t.n(o);r.a}}]);