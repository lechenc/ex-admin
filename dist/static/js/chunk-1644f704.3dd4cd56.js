(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1644f704"],{"15fd":function(e,t,a){"use strict";function i(e,t){if(null==e)return{};var a,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)a=o[i],t.indexOf(a)>=0||(r[a]=e[a]);return r}function r(e,t){if(null==e)return{};var a,r,o=i(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}a.d(t,"a",(function(){return r}))},"38d1":function(e,t,a){},"5fe1":function(e,t,a){"use strict";a("38d1")},"936e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"globalSettings-container"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"160px",size:"medium"}},[a("div",{staticClass:"container-top"},[a("span",[e._v("当前参数")]),e._v(" "),a("div",[a("div",{staticClass:"coin"},[e._v("币种")]),e._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"medium",disabled:!e.isModify},model:{value:e.coinName,callback:function(t){e.coinName=t},expression:"coinName"}},e._l(e.coinlist,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.label}})})),1)],1)]),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"box-card-row"},[a("div",[e._v("\n          "+e._s(e.coinName)+"当前市价："),a("span",[e._v(e._s(e.form.toRMBPrice))])]),e._v(" "),1==e.form.MERCHANT_RATE_TYPE?a("div",[e._v("\n          "+e._s(e.coinName)+"当前兑入价格："),a("span",[e._v(e._s(Math.floor(1e6*(1*e.form.MERCHANT_IN_PRICE+1*e.form.MERCHANT_IN_PRICE_FLOAT))/1e6))])]):a("div",[e._v("\n          "+e._s(e.coinName)+"当前兑入价格："),a("span",[e._v(e._s(e.form.MERCHANT_IN_PRICE))])]),e._v(" "),1==e.form.MERCHANT_RATE_TYPE?a("div",[e._v("\n          "+e._s(e.coinName)+"当前兑出价格："),a("span",[e._v(e._s(Math.floor(1e6*(1*e.form.MERCHANT_OUT_PRICE+1*e.form.MERCHANT_OUT_PRICE_FLOAT))/1e6))])]):a("div",[e._v("\n          "+e._s(e.coinName)+"当前兑出价格："),a("span",[e._v(e._s(e.form.MERCHANT_OUT_PRICE))])])])]),e._v(" "),a("h4",[e._v("商户设置")]),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"box-card-con"},[a("H5",[e._v("兑入兑出价格设置")]),e._v(" "),a("el-form-item",{attrs:{label:"类型","label-width":e.labelWidth}},[a("el-radio-group",{model:{value:e.form.MERCHANT_RATE_TYPE,callback:function(t){e.$set(e.form,"MERCHANT_RATE_TYPE",t)},expression:"form.MERCHANT_RATE_TYPE"}},[a("el-radio",{attrs:{label:"1"}},[e._v("系统")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("手动")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"货币",prop:"MERCHANT_COIN_NAME","label-width":e.labelWidth}},[a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{type:"text",placeholder:"请输入",disabled:!e.isModify},model:{value:e.form.MERCHANT_COIN_NAME,callback:function(t){e.$set(e.form,"MERCHANT_COIN_NAME",t)},expression:"form.MERCHANT_COIN_NAME"}})],1)],1),e._v(" "),1==e.form.MERCHANT_RATE_TYPE?a("el-form-item",{attrs:{label:"兑入价格","label-width":e.labelWidth}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{type:"text",placeholder:"请输入",disabled:!0},model:{value:e.form.MERCHANT_IN_PRICE,callback:function(t){e.$set(e.form,"MERCHANT_IN_PRICE",t)},expression:"form.MERCHANT_IN_PRICE"}})],1),e._v(" "),a("el-col",{attrs:{span:1}},[a("div",{staticClass:"dot"},[e._v("+")])]),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{type:"text",placeholder:"输入倍数（如0.9）",disabled:!e.isModify},model:{value:e.form.MERCHANT_IN_PRICE_FLOAT,callback:function(t){e.$set(e.form,"MERCHANT_IN_PRICE_FLOAT",t)},expression:"form.MERCHANT_IN_PRICE_FLOAT"}})],1)],1):a("el-form-item",{attrs:{label:"兑入价格","label-width":e.labelWidth}},[a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{type:"text",placeholder:"请输入",disabled:!e.isModify},model:{value:e.form.MERCHANT_IN_PRICE,callback:function(t){e.$set(e.form,"MERCHANT_IN_PRICE",t)},expression:"form.MERCHANT_IN_PRICE"}})],1)],1),e._v(" "),1==e.form.MERCHANT_RATE_TYPE?a("el-form-item",{attrs:{label:"兑出价格","label-width":e.labelWidth}},[a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{type:"text",placeholder:"请输入",disabled:!0},model:{value:e.form.MERCHANT_OUT_PRICE,callback:function(t){e.$set(e.form,"MERCHANT_OUT_PRICE",t)},expression:"form.MERCHANT_OUT_PRICE"}})],1),e._v(" "),a("el-col",{attrs:{span:1}},[a("div",{staticClass:"dot"},[e._v("+")])]),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{type:"text",placeholder:"输入倍数（如1.1）",disabled:!e.isModify},model:{value:e.form.MERCHANT_OUT_PRICE_FLOAT,callback:function(t){e.$set(e.form,"MERCHANT_OUT_PRICE_FLOAT",t)},expression:"form.MERCHANT_OUT_PRICE_FLOAT"}})],1)],1):a("el-form-item",{attrs:{label:"兑出价格","label-width":e.labelWidth}},[a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{type:"text",placeholder:"请输入",disabled:!e.isModify},model:{value:e.form.MERCHANT_OUT_PRICE,callback:function(t){e.$set(e.form,"MERCHANT_OUT_PRICE",t)},expression:"form.MERCHANT_OUT_PRICE"}})],1)],1),e._v(" "),a("p",[e._v("提示：价格默认使用系统设置的价格; 如果开启手动设置的价格，那么自动关闭系统价格; 如果开启手动设置的的价格，则自动开启系统价格。")])],1)]),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"box-card-con"},[a("H5",[e._v("商户初始化设置")]),e._v(" "),a("el-form-item",{attrs:{label:"支付方式"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!e.isModify},model:{value:e.payType,callback:function(t){e.payType=t},expression:"payType"}},e._l(e.form.otcPayLists,(function(e){return a("el-option",{key:e.payType,attrs:{label:e.description,value:e.payType}})})),1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"商户兑入手续费比例"}},[a("el-input",{attrs:{type:"number",placeholder:"未设置默认1.5%",disabled:!e.isModify},on:{input:function(t){e.inFee=e.inFee.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")}},model:{value:e.inFee,callback:function(t){e.inFee="string"===typeof t?t.trim():t},expression:"inFee"}},[a("div",{staticClass:"gcode",attrs:{slot:"append"},slot:"append"},[e._v("%")])])],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"商户兑出手续费比例"}},[a("el-input",{attrs:{type:"number",placeholder:"未设置默认0.3%",disabled:!e.isModify},on:{input:function(t){e.outFee=e.outFee.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")}},model:{value:e.outFee,callback:function(t){e.outFee="string"===typeof t?t.trim():t},expression:"outFee"}},[a("div",{staticClass:"gcode",attrs:{slot:"append"},slot:"append"},[e._v("%")])])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"商户最小兑入额度",prop:"MERCHANT_MIN_IN_AMOUNT"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入",disabled:!e.isModify},model:{value:e.form.MERCHANT_MIN_IN_AMOUNT,callback:function(t){e.$set(e.form,"MERCHANT_MIN_IN_AMOUNT","string"===typeof t?t.trim():t)},expression:"form.MERCHANT_MIN_IN_AMOUNT"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"商户最大兑入额度",prop:"MERCHANT_MAX_IN_AMOUNT"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入",disabled:!e.isModify},model:{value:e.form.MERCHANT_MAX_IN_AMOUNT,callback:function(t){e.$set(e.form,"MERCHANT_MAX_IN_AMOUNT","string"===typeof t?t.trim():t)},expression:"form.MERCHANT_MAX_IN_AMOUNT"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"商户最小兑出额度",prop:"MERCHANT_MIN_OUT_AMOUNT"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入",disabled:!e.isModify},model:{value:e.form.MERCHANT_MIN_OUT_AMOUNT,callback:function(t){e.$set(e.form,"MERCHANT_MIN_OUT_AMOUNT","string"===typeof t?t.trim():t)},expression:"form.MERCHANT_MIN_OUT_AMOUNT"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"商户最大兑出额度",prop:"MERCHANT_MAX_OUT_AMOUNT"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入",disabled:!e.isModify},model:{value:e.form.MERCHANT_MAX_OUT_AMOUNT,callback:function(t){e.$set(e.form,"MERCHANT_MAX_OUT_AMOUNT","string"===typeof t?t.trim():t)},expression:"form.MERCHANT_MAX_OUT_AMOUNT"}})],1)],1)],1),e._v(" "),a("p",[e._v("提示：商户默认该参数，可在商户查询模块单独配置该参数。初始化设置修改后只对新增商户生效。")])],1)]),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"box-card-con"},[a("H5",[e._v("全局设置")]),e._v(" "),"USDT"==e.coinName?a("div",[a("el-form-item",{attrs:{label:"omni提币手续费",prop:"MERCHANT_WITHDRAW_RATE_OMNI"}},[a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{type:"number",placeholder:"请输入",disabled:!e.isModify},model:{value:e.form.MERCHANT_WITHDRAW_RATE_OMNI,callback:function(t){e.$set(e.form,"MERCHANT_WITHDRAW_RATE_OMNI","string"===typeof t?t.trim():t)},expression:"form.MERCHANT_WITHDRAW_RATE_OMNI"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Erc20提币手续费",prop:"MERCHANT_WITHDRAW_RATE_ERC20"}},[a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{type:"number",placeholder:"请输入",disabled:!e.isModify},model:{value:e.form.MERCHANT_WITHDRAW_RATE_ERC20,callback:function(t){e.$set(e.form,"MERCHANT_WITHDRAW_RATE_ERC20","string"===typeof t?t.trim():t)},expression:"form.MERCHANT_WITHDRAW_RATE_ERC20"}})],1)],1)],1):a("div",[a("el-form-item",{attrs:{label:"提币手续费",prop:"MERCHANT_WITHDRAW_RATE"}},[a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{type:"number",placeholder:"请输入",disabled:!e.isModify},model:{value:e.form.MERCHANT_WITHDRAW_RATE,callback:function(t){e.$set(e.form,"MERCHANT_WITHDRAW_RATE","string"===typeof t?t.trim():t)},expression:"form.MERCHANT_WITHDRAW_RATE"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"转账手续费",prop:"MERCHANT_TRADE_RATE"}},[a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{type:"number",placeholder:"请输入",disabled:!e.isModify},model:{value:e.form.MERCHANT_TRADE_RATE,callback:function(t){e.$set(e.form,"MERCHANT_TRADE_RATE","string"===typeof t?t.trim():t)},expression:"form.MERCHANT_TRADE_RATE"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"商户兑入方式"}},[a("el-radio",{attrs:{label:"派单",disabled:!e.isModify},on:{change:e.changeSwitch}}),e._v(" "),a("el-radio",{attrs:{label:"抢单",disabled:!e.isModify},on:{change:e.changeSwitch}})],1),e._v(" "),a("el-form-item",{attrs:{label:"抢单转派单时间",prop:"rushWaitTime"}},[a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{type:"text",placeholder:"请输入时间",disabled:!e.isModify},on:{blur:e.changeSwitch},model:{value:e.rushWaitTime,callback:function(t){e.rushWaitTime=t},expression:"rushWaitTime"}},[a("div",{attrs:{slot:"append"},slot:"append"},[e._v("S")])])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"商户批量兑出最大单数",prop:"CASHOUT_NUM"}},[a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{type:"text",disabled:!e.isModify},model:{value:e.form.CASHOUT_NUM,callback:function(t){e.$set(e.form,"CASHOUT_NUM",t)},expression:"form.CASHOUT_NUM"}})],1)],1)],1)])],1),e._v(" "),e.isCURDAuth?a("div",[e.isModify?e._e():a("div",{staticClass:"middle"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.isModify=!0}}},[e._v("修改")])],1),e._v(" "),e.isModify?a("div",{staticClass:"middle"},[a("el-button",{attrs:{type:"primary",plain:"",size:"medium"},on:{click:function(t){e.isModify=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.openDialogCode}},[e._v("提交修改")])],1):e._e()]):e._e()],1)},r=[],o=a("5530"),s=a("15fd"),l=(a("96cf"),a("1da1")),n=(a("ac6a"),a("4ec3")),c=(a("ca00"),["BATCHOUT_RATIO_FEE","otcPayLists"]),_={data:function(){return{coinName:this.$variableCoin,isCURDAuth:!0,isModify:!1,listLoading:!1,list:[],labelWidth:"90px",inFee:0,outFee:0,payType:"",rushWaitTime:"",inSwitch:"1",form:{otcPayLists:[]},rules:{},coinlist:[]}},watch:{coinName:function(){this.getList()},payType:function(e,t){var a=this;this.form.otcPayLists.forEach((function(e,t){e.payType==a.payType&&(a.inFee=Math.floor(1e4*e.inFee)/100,a.outFee=Math.floor(1e4*e.outFee)/100)}))}},methods:{getList:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.listLoading){e.next=2;break}return e.abrupt("return");case 2:return t={coinName:this.coinName},this.listLoading=!0,e.next=6,n["a"].getTradeConfig(t);case 6:a=e.sent,a&&(this.form=a.data.result,this.form.BATCHOUT_RATIO_FEE=Math.floor(1e4*this.form.BATCHOUT_RATIO_FEE)/100,this.form.otcPayLists.length>0&&(this.payType=this.form.otcPayLists[0].payType)),this.listLoading=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getInSwitch:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].getInSwitch({});case 2:t=e.sent,t&&(this.inSwitch=t.data.result.inSwitch+"",this.rushWaitTime=t.data.result.rushWaitTime);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changeSwitch:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={inSwitch:this.inSwitch,rushWaitTime:this.rushWaitTime},e.next=3,n["a"].modifyInSwitch(t);case 3:a=e.sent,a&&this.getInSwitch();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openDialogCode:function(){var e=this;this.$prompt("请输入谷歌验证码","安全验证",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(t){var a=t.value;e.confirmSend(a)})).catch((function(){e.$message({type:"info",message:"取消修改"})}))},confirmSend:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs["form"].validate(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(i){var r,l,_,p,d,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!i){e.next=7;break}return r=a.form,l=r.BATCHOUT_RATIO_FEE,_=r.otcPayLists,p=Object(s["a"])(r,c),d=Object(o["a"])({secret:t,inFee:(a.inFee/100).toFixed(4),outFee:(a.outFee/100).toFixed(4),payType:a.payType,BATCHOUT_RATIO_FEE:Math.floor(l)/100,otcPayLists:JSON.stringify(_)},p),e.next=5,n["a"].updateConfigMerchant(d);case 5:f=e.sent,f&&(a.$message({message:"修改成功！",type:"success"}),a.getList(),a.isModify=!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},mounted:function(){var e=this;this.$store.dispatch("common/getFiatCoinList").then((function(){e.coinlist=e.$store.state.common.fiatcoinlist})),this.getList(),this.getInSwitch()}},p=_,d=(a("5fe1"),a("2877")),f=Object(d["a"])(p,i,r,!1,null,null,null);t["default"]=f.exports}}]);