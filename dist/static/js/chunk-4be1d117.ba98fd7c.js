(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4be1d117"],{"10b4":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AuthorizedMerchantInfo-page"},[a("el-row",{staticClass:"sac-row"},[a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")])],1)],1),t._v(" "),a("el-form",{ref:"form",attrs:{model:t.formData,"label-width":"85px",size:"mini",inline:""}},[a("el-form-item",{attrs:{label:"分组名称:"}},[a("el-input",{attrs:{disabled:"",value:t.groupName}})],1),t._v(" "),a("el-form-item",{attrs:{label:"创建时间:"}},[a("el-input",{attrs:{disabled:"",value:t.createTime}})],1)],1),t._v(" "),a("div",{staticClass:"main"},[a("MerchantList",{attrs:{groupId:t.groupId}}),t._v(" "),a("UserList",{attrs:{groupId:t.groupId}})],1),t._v(" "),a("addUser",{attrs:{show:t.addUserShow},on:{change:function(e){t.addUserShow=!1}}})],1)},r=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"addUser-page",attrs:{title:"增加码商",visible:t.showWidget},on:{"update:visible":function(e){t.showWidget=e}}},[a("el-form",{attrs:{model:t.filterForm,"label-width":"95px",size:"small",inline:""}},[a("el-form-item",{attrs:{label:"账号:"}},[a("el-input",{attrs:{placeholder:"请输入账号"},model:{value:t.filterForm.account,callback:function(e){t.$set(t.filterForm,"account",e)},expression:"filterForm.account"}})],1),t._v(" "),a("el-form-item",[a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:function(e){return t.getUserData("saerch")}}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addUser}},[t._v("确定增加")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%",height:"100%"},attrs:{data:t.userData,height:"420px","row-key":"inviteCode",border:"",lazy:"",load:t.load,"tree-props":{children:"children",hasChildren:"hasChildren"},size:"small"}},[a("el-table-column",{attrs:{prop:"nickName",label:"用户编号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"ID",align:"center",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"account",label:"账号",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{width:"55",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{staticClass:"checkBox",on:{click:function(a){return t.itemClick(e.row)}}},[e.row.hasItem||1==e.row.inGroup?a("div",[t._v("已选")]):a("div",{staticClass:"check",class:e.row.check?"isCheck":""})])}}])})],1)],1)},s=[],c=(a("ac6a"),a("96cf"),a("3b8d")),l=a("4ec3"),o={components:{},props:{},data:function(){return{showWidget:!1,addMerchantShow:!1,filterForm:{account:"",groupId:""},merchantPageData:{list:[],total:0},multipleSelection:[],selectList:[],checkedList:[],isSelectAll:!1,userData:[],groupId:""}},mounted:function(){},methods:{addUser:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(this.selectList.length<1)){t.next=3;break}return this.$message.error("请选择码商"),t.abrupt("return");case 3:if(""===this.groupId){t.next=13;break}return e="",this.selectList.forEach((function(t){e+=t.userId+","})),a={groupId:this.groupId,userIds:e.substring(0,e.length-1)},t.next=9,l["a"].subMerchantToGroup(a);case 9:n=t.sent,n&&200==n.data.code&&(this.showWidget=!1,this.$message.success(n.data.msg),this.$emit("success")),t.next=15;break;case 13:this.showWidget=!1,this.$emit("addData",this.selectList);case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getUserData:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a,n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.filterForm.groupId=this.groupId,t.next=3,l["a"].findInviteChildByGroup(this.filterForm);case 3:a=t.sent,a&&200==a.data.code&&(n=[],"saerch"==e&&a.data.result.userId?(n=[a.data.result],this.mergeArray(n),a.data.result.list&&a.data.result.list.length>0&&(n[0].hasChildren=!0)):(n=a.data.result.list,n.forEach((function(t){t.childNum>0?t.hasChildren=!0:t.hasChildren=!1})),this.mergeArray(n)),this.userData=[],setTimeout((function(){r.userData=n}),100));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),load:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,a,n){var r,i,s,c,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.inviteCode,i={inviteCode:r,groupId:this.groupId},t.next=4,l["a"].findInviteChildByGroup(i);case 4:s=t.sent,s&&(c=s.data.result.list,c.forEach((function(t){t.childNum>0?t.hasChildren=!0:t.hasChildren=!1,o.checkedList.length>0&&o.checkedList.forEach((function(e){e.userId==t.userId&&o.$set(t,"hasItem",!0)}))})),n(c));case 6:case"end":return t.stop()}}),t,this)})));function e(e,a,n){return t.apply(this,arguments)}return e}(),mergeArray:function(t){var e=this;""===this.groupId&&t.forEach((function(t){e.checkedList.length>0&&e.checkedList.forEach((function(a){a.userId==t.userId&&e.$set(t,"hasItem",!0)}))}))},allCheck:function(t){t.forEach((function(t,e){}))},itemClick:function(t){t.check?this.itemSelect(t,!1):this.itemSelect(t,!0)},itemSelect:function(t,e){var a=this;this.$set(t,"check",e),t.check?(this.$set(t,"check",!0),this.selectList.push(t)):this.selectList.forEach((function(e,n){t.userId==e.userId&&a.selectList.splice(n,1)}));for(var n=!0,r=0;r<this.merchantPageData.list.length;r++)this.merchantPageData.list[r].check||(n=!1);this.isSelectAll=n},show:function(t,e){this.showWidget=!0,this.merchantFormData={account:""},this.selectList=[],this.checkedList=t,this.groupId=e||"",this.getUserData()}},watch:{showWidget:function(t,e){t||this.$emit("change")}},computed:{}},u=o,h=(a("80d3"),a("0c7c")),d=Object(h["a"])(u,i,s,!1,null,null,null),p=d.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"merchantList-page"},[a("div",{staticClass:"title"},[a("span",[t._v("商户列表：")]),t._v(" "),a("p",[a("el-button",{attrs:{size:"small",type:"danger",disabled:0==t.multipleSelection.length},on:{click:function(e){return t.checkedDelete()}}},[t._v(" 一键删除 ")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addMerchant}},[t._v(" 增加商户 ")])],1)]),t._v(" "),a("el-table",{attrs:{data:t.list,height:"auto",border:"",size:"small"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"商户账户",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nickName",label:"商户用户编号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.nickName||e.row.name))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"操作",fixed:"right",width:"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return t.subMerchantToGroup(e.row.userId)}}},[t._v(" 删除 ")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.pageData.pageNum,"page-size":t.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:1*t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),a("AddMerchant",{ref:"AddMerchant",on:{addData:t.addData,success:t.getData}})],1)},m=[],f=(a("28a5"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"addMerchant-page",attrs:{title:"增加商户",visible:t.showWidget},on:{"update:visible":function(e){t.showWidget=e}}},[a("el-form",{attrs:{model:t.merchantFormData,"label-width":"105px",size:"small",inline:""}},[a("el-form-item",{attrs:{label:"账户/用户编号:"}},[a("el-input",{attrs:{placeholder:"请输入账户或者用户编号"},model:{value:t.merchantFormData.name,callback:function(e){t.$set(t.merchantFormData,"name",e)},expression:"merchantFormData.name"}})],1),t._v(" "),a("el-form-item",[a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:t.getMerchantList}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addMerchantToGroup}},[t._v("确定增加")])],1)],1),t._v(" "),a("el-table",{staticClass:"addMerchantSelect",staticStyle:{"min-width":"100%"},attrs:{data:t.merchantPageData.list,height:"420px",border:"",size:"small"},on:{"header-click":t.headerClick}},[a("el-table-column",{attrs:{prop:"phone",label:"账号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"用户编号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{width:"55",label:"全选",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{staticClass:"checkBox",on:{click:function(a){return t.itemClick(e.row)}}},[e.row.hasItem||1==e.row.inGroup?a("div",[t._v("已选")]):a("div",{staticClass:"check",class:e.row.check?"isCheck":""})])}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.merchantFormData.pageNum,"page-sizes":[10,20],"page-size":t.merchantFormData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:1*t.merchantPageData.total},on:{"size-change":t.addMerchantSelectSizeChange,"current-change":t.addMerchantSelectCurrentChange}})],1)}),v=[],b={components:{},props:{list:{type:Array,default:function(){return[]}}},data:function(){return{groupId:"",showWidget:!1,addMerchantShow:!1,merchantFormData:{name:"",groupId:"",pageNum:1,pageSize:10},merchantPageData:{list:[],total:0},multipleSelection:[],selectList:[],checkedList:[],isSelectAll:!1}},mounted:function(){},methods:{handleSelectionChange:function(t){this.multipleSelection=t},addMerchantSelectSizeChange:function(t){this.merchantFormData.pageSize=t,this.mergeArray(),this.getMerchantList()},addMerchantSelectCurrentChange:function(t){this.merchantFormData.pageNum=t,this.mergeArray(),this.getMerchantList()},addMerchantToGroup:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(this.selectList.length<1)){t.next=3;break}return this.$message.error("请选择商户"),t.abrupt("return");case 3:if(""===this.groupId){t.next=13;break}return e="",this.selectList.forEach((function(t){e+=t.userId+","})),a={groupId:this.groupId,userIds:e.substring(0,e.length-1)},t.next=9,l["a"].addMerchantToGroup(a);case 9:n=t.sent,n&&200==n.data.code&&(this.showWidget=!1,this.$message.success(n.data.msg),this.$emit("success")),t.next=15;break;case 13:this.showWidget=!1,this.$emit("addData",this.selectList);case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getMerchantList:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a,n,r,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.merchantFormData.groupId=this.groupId,t.next=3,l["a"].listByGroup(this.merchantFormData);case 3:if(e=t.sent,e&&200==e.data.code)for(this.merchantPageData=e.data.result.page,a=0;a<this.merchantPageData.list.length;a++){if(n=!1,r=!1,this.selectList.length>0)for(i=0;i<this.selectList.length;i++)this.merchantPageData.list[a].userId==this.selectList[i].userId&&(r=!0);if(this.checkedList.length>0&&""==this.groupId)for(s=0;s<this.checkedList.length;s++)this.merchantPageData.list[a].userId==this.checkedList[s].userId&&(n=!0);this.$set(this.merchantPageData.list[a],"hasItem",n),this.$set(this.merchantPageData.list[a],"check",r)}case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),headerClick:function(t){if("全选"===t.label)if(this.isSelectAll)for(var e=0;e<this.merchantPageData.list.length;e++)this.hasItem||this.itemSelect(this.merchantPageData.list[e],!1);else for(var a=0;a<this.merchantPageData.list.length;a++)this.hasItem||this.itemSelect(this.merchantPageData.list[a],!0)},itemClick:function(t){t.check?this.itemSelect(t,!1):this.itemSelect(t,!0)},itemSelect:function(t,e){var a=this;this.$set(t,"check",e),t.check?(this.$set(t,"check",!0),this.selectList.push(t)):this.selectList.forEach((function(e,n){t.userId==e.userId&&a.selectList.splice(n,1)}));for(var n=!0,r=0;r<this.merchantPageData.list.length;r++)this.merchantPageData.list[r].check||(n=!1);this.isSelectAll=n},mergeArray:function(){for(var t=0;t<this.multipleSelection.length;t++)if(this.selectList.length>0){for(var e=!1,a=0;a<this.selectList.length;a++)this.multipleSelection[t].userId==this.selectList[a].userId&&(e=!0);e||this.selectList.push(this.multipleSelection[t])}else this.selectList.push(this.multipleSelection[t])},show:function(t,e){this.showWidget=!0,this.merchantFormData={name:"",pageNum:1,pageSize:10},this.checkedList=t,this.selectList=[],this.groupId=e||"",this.getMerchantList()}},watch:{showWidget:function(t,e){}},computed:{}},w=b,k=(a("ec6f6"),Object(h["a"])(w,f,v,!1,null,null,null)),I=k.exports,D={components:{AddMerchant:I},props:{groupId:{type:String,default:""}},data:function(){return{pageData:{groupId:"",pageNum:1,pageSize:20},multipleSelection:[],total:3,list:[]}},mounted:function(){var t=this;this.list=[],setTimeout((function(){""!==t.groupId&&(t.pageData.groupId=t.groupId,t.getData())}),100)},methods:{getList:function(){return this.list},addMerchant:function(){this.$refs.AddMerchant.show(this.list,this.groupId)},addData:function(t){this.list=this.list.concat(t)},getData:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l["a"].checkMerchantGroupRecdInfo(this.pageData);case 2:e=t.sent,e&&(this.list=e.data.result.list,this.total=e.data.result.total);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),checkedDelete:function(){var t="";this.multipleSelection.forEach((function(e){t+=e.userId+","})),this.subMerchantToGroup(t.substring(0,t.length-1))},subMerchantToGroup:function(t){var e=this;if(""!==this.groupId)this.$confirm("此操作将会将用户移出该分组，确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(c["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n={groupId:e.groupId,userIds:t},a.next=3,l["a"].subMerchantToGroup(n);case 3:r=a.sent,r&&200==r.data.code?(e.$message.success(r.data.msg),e.getData()):e.$message.error(r.data.msg);case 5:case"end":return a.stop()}}),a)})))).catch((function(){}));else{var a=[];a=(t+"").indexOf(",")>-1?t.split(","):[t];var n=[];this.list.forEach((function(t,e){var r=!1;a.forEach((function(e){t.userId==e&&(r=!0)})),r||n.push(t)})),this.list=n}},handleSelectionChange:function(t){this.multipleSelection=t},handleCurrentChange:function(t){this.pageData.pageNum=t,this.getData()},handleSizeChange:function(t){this.pageData.pageSize=t,this.getData()}},watch:{},computed:{}},S=D,_=(a("c2a1"),Object(h["a"])(S,g,m,!1,null,null,null)),y=_.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"userList-page"},[a("div",{staticClass:"title"},[a("span",[t._v("码商列表：")]),t._v(" "),a("p",[a("el-button",{attrs:{size:"small",type:"danger",disabled:0==t.multipleSelection.length},on:{click:function(e){return t.checkedDelete()}}},[t._v(" 一键删除 ")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.$refs.AddUser.show(t.list,t.groupId)}}},[t._v(" 增加码商 ")])],1)]),t._v(" "),a("el-table",{attrs:{data:t.list,height:"auto",border:"",size:"small"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"码商账户",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.phone||e.row.account))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"nickName",label:"码商用户编号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"操作",fixed:"right",width:"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return t.subUserToGroup(e.row.userId)}}},[t._v(" 删除 ")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.pageData.pageNum,"page-size":t.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:1*t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),a("AddUser",{ref:"AddUser",on:{addData:t.addData,success:t.getData}})],1)},x=[],L={components:{AddUser:p},props:{groupId:{type:String,default:""}},data:function(){return{pageData:{groupId:"",pageNum:1,pageSize:20},multipleSelection:[],total:3,list:[]}},mounted:function(){var t=this;this.list=[],setTimeout((function(){""!==t.groupId&&(t.pageData.groupId=t.groupId,t.getData())}),100)},methods:{getList:function(){return this.list},addData:function(t){this.list=this.list.concat(t)},getData:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l["a"].checkUserGroupRecdInfo(this.pageData);case 2:e=t.sent,e&&(this.list=e.data.result.list,this.total=e.data.result.total);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),checkedDelete:function(){var t="";this.multipleSelection.forEach((function(e){t+=e.userId+","})),this.subUserToGroup(t.substring(0,t.length-1))},subUserToGroup:function(t){var e=this;if(""!==this.groupId)this.$confirm("此操作将会将用户移出该分组，确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(c["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n={groupId:e.groupId,userIds:t},a.next=3,l["a"].subUserToGroup(n);case 3:r=a.sent,r&&200==r.data.code?(e.$message.success(r.data.msg),e.getData()):e.$message.error(r.data.msg);case 5:case"end":return a.stop()}}),a)})))).catch((function(){}));else{var a=[];a=(t+"").indexOf(",")>-1?t.split(","):[t];var n=[];this.list.forEach((function(t,e){var r=!1;a.forEach((function(e){t.userId==e&&(r=!0)})),r||n.push(t)})),this.list=n}},handleSelectionChange:function(t){this.multipleSelection=t},handleCurrentChange:function(t){this.pageData.pageNum=t,this.getData()},handleSizeChange:function(t){this.pageData.pageSize=t,this.getData()}},watch:{},computed:{}},z=L,$=(a("a66a"),Object(h["a"])(z,C,x,!1,null,null,null)),M=$.exports,N={components:{addUser:p,MerchantList:y,UserList:M},data:function(){return{addUserShow:!1,formData:{create_time:"",groupName:"",name:""},pageData:{pageNum:1,pageSzie:20,total:3},multipleSelection:[],total:3,list:[{groupName:"默认",phone:"15179818328"},{groupName:"allbet",phone:"177939729"},{groupName:"ksx",phone:"15792797"},{groupName:"默认ksx",phone:"188397900"}],groupId:"",createTime:"",groupName:""}},mounted:function(){this.groupId=this.$route.query.id+"",this.createTime=this.$route.query.createTime,this.groupName=this.$route.query.groupName},methods:{handleSelectionChange:function(t){this.multipleSelection=t},handleCurrentChange:function(t){this.pageNum=t},handleSizeChange:function(t){this.pageSize=t}}},T=N,U=(a("2794"),Object(h["a"])(T,n,r,!1,null,null,null));e["default"]=U.exports},"1c86":function(t,e,a){},2794:function(t,e,a){"use strict";var n=a("3f53"),r=a.n(n);r.a},"3f53":function(t,e,a){},"5ceb":function(t,e,a){},"7d88":function(t,e,a){},"80d3":function(t,e,a){"use strict";var n=a("7d88"),r=a.n(n);r.a},a66a:function(t,e,a){"use strict";var n=a("f534"),r=a.n(n);r.a},c2a1:function(t,e,a){"use strict";var n=a("5ceb"),r=a.n(n);r.a},ec6f6:function(t,e,a){"use strict";var n=a("1c86"),r=a.n(n);r.a},f534:function(t,e,a){}}]);