(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f544698c"],{a345:function(e,t,r){},ee0c:function(e,t,r){"use strict";var i=r("a345"),a=r.n(i);a.a},f959:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"agentLevel-container"},[r("div",{staticClass:"container-top"},[r("Bsearch",{attrs:{configs:e.searchCofig},on:{"do-search":e.doSearch,"do-reset":e.doReset}})],1),e._v(" "),r("div",[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.list,"row-key":"uid",border:"",lazy:"",load:e.load,"tree-props":{children:"children",hasChildren:"hasChildren"},"header-cell-style":{background:"#eef1f6",color:"#606266"}}},[r("el-table-column",{attrs:{width:"130",prop:"uid",label:"代理UID"}}),e._v(" "),r("el-table-column",{attrs:{prop:"remark",label:"备注"}}),e._v(" "),r("el-table-column",{attrs:{prop:"commissionPercent",label:"手续费返佣比例"}}),e._v(" "),r("el-table-column",{attrs:{prop:"packPercent",label:"团队长返佣比例"}}),e._v(" "),r("el-table-column",{attrs:{prop:"amount",label:"可用"}}),e._v(" "),r("el-table-column",{attrs:{prop:"waitAmount",label:"待结算"}}),e._v(" "),r("el-table-column",{attrs:{prop:"ensureAmount",label:"保证金"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",fixed:"right",width:"200",prop:"action"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.edit(t.row)}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"编辑费率",width:"500px",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.rules}},[r("el-row",{attrs:{span:24}},[r("el-col",{attrs:{span:21}},[r("el-form-item",{attrs:{label:"代理商UID","label-width":e.formLabelWidth}},[r("el-input",{attrs:{type:"text",placeholder:"请输入",disabled:!0},model:{value:e.editForm.uid,callback:function(t){e.$set(e.editForm,"uid",t)},expression:"editForm.uid"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{span:24}},[r("el-col",{attrs:{span:21}},[r("el-form-item",{attrs:{label:"手续费返佣比例","label-width":e.formLabelWidth,prop:"commissionPercent"}},[r("el-input",{attrs:{type:"text",placeholder:"请输入"},on:{input:function(t){return e.checkVal("commissionPercent",1)}},model:{value:e.editForm.commissionPercent,callback:function(t){e.$set(e.editForm,"commissionPercent",t)},expression:"editForm.commissionPercent"}},[r("template",{slot:"append"},[e._v("%")])],2)],1)],1)],1),e._v(" "),r("el-row",{attrs:{span:24}},[r("el-col",{attrs:{span:21}},[r("el-form-item",{attrs:{label:"团队长返佣比例","label-width":e.formLabelWidth,prop:"packPercent"}},[r("el-input",{attrs:{type:"text",placeholder:"请输入"},on:{input:function(t){return e.checkVal("packPercent",1)}},model:{value:e.editForm.packPercent,callback:function(t){e.$set(e.editForm,"packPercent",t)},expression:"editForm.packPercent"}},[r("template",{slot:"append"},[e._v("%")])],2)],1)],1)],1),e._v(" "),r("el-row",{attrs:{span:24}},[r("el-col",{attrs:{span:21}},[r("el-form-item",{attrs:{label:"管理员谷歌","label-width":e.formLabelWidth}},[r("el-input",{attrs:{type:"text",placeholder:"请输入"},model:{value:e.editForm.googleCode,callback:function(t){e.$set(e.editForm,"googleCode",t)},expression:"editForm.googleCode"}})],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.confirmOp}},[e._v("确 定")])],1)],1)],1)},a=[],n=(r("28a5"),r("96cf"),r("3b8d")),o=(r("ac6a"),r("a481"),r("c249")),s=r("2fee"),l=r("f21b"),c=r("65fc"),d=r("4ec3"),u={name:"AgentFinancialFlow",components:{Btable:s["a"],Bsearch:o["a"],iconPage:l["a"]},data:function(){return{showType:1,listLoading:!1,btnLoading:!1,list:[],configs:[],searchCofig:[],search_params_obj:{},current_page:1,pageSize:10,total:0,pages:0,toDay:"",ago:"",curRow:{},dialogFormVisible:!1,formLabelWidth:"120px",editForm:{uid:"",userId:"",commissionPercent:"",packPercent:"",googleCode:""},rules:{commissionPercent:[{required:!0,message:"必填",trigger:"blur"}],packPercent:[{required:!0,message:"必填",trigger:"blur"}]}}},methods:{checkVal:function(e,t){this.editForm[e]=(this.editForm[e]+"").replace(/[^\d]/g,""),1===t&&this.editForm[e]>=100&&(this.editForm[e]=100),this.editForm[e]<0&&(this.editForm[e]=0)},doSearch:function(e){this.current_page=1,this.search_params_obj=e,this.getList()},doReset:function(){this.search_params_obj={},this.searchCofig.forEach((function(e){e["value"]=""})),this.getList()},goPage:function(e){this.current_page=e,this.getList()},getList:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.listLoading){e.next=2;break}return e.abrupt("return");case 2:return t={type:1},Object.assign(t,this.search_params_obj),this.listLoading=!0,this.list=[],e.next=8,d["a"].getAgentRelation(t);case 8:r=e.sent,r?(i=r.data.data.list,i.forEach((function(e){e["hasChildren"]=!0})),this.list=i,this.listLoading=!1):(this.list=[],this.listLoading=!1);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),load:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r,i){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].getAgentRelation({uid:t.uid,type:2});case 2:a=e.sent,a&&(n=a.data.data.list,n.forEach((function(e){e["hasChildren"]=!0})),i(n));case 4:case"end":return e.stop()}}),e)})));function t(t,r,i){return e.apply(this,arguments)}return t}(),edit:function(e){this.dialogFormVisible=!0;var t=e.uid,r=e.userId,i=e.commissionPercent,a=e.packPercent;this.editForm={uid:t,userId:r,commissionPercent:i.split("%").join(""),packPercent:a.split("%").join(""),googleCode:""}},confirmOp:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs["editForm"].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(r){var i,a,n,o,s,l,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=9;break}return i=t.editForm,a=i.userId,n=i.commissionPercent,o=i.packPercent,s=i.googleCode,l={commissionPercent:n+"%",packPercent:o+"%",userId:a,googleCode:s,needCheckGoogleCode:!0},t.btnLoading=!0,e.next=6,d["a"].editRate(l);case 6:c=e.sent,c&&(t.$message({message:"编辑成功",type:"success"}),t.dialogFormVisible=!1,t.getList()),t.btnLoading=!1;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){this.searchCofig=this.$util.clone(c["c"]),this.getList()}},p=u,m=(r("ee0c"),r("0c7c")),h=Object(m["a"])(p,i,a,!1,null,null,null);t["default"]=h.exports}}]);