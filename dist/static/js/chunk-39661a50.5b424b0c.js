(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39661a50"],{"259f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"extract-container"},[a("div",{staticClass:"container-top"},[a("Bsearch",{attrs:{configs:e.searchCofig,excelLoading:e.excelLoading,exportExcel:!0,calLoading:e.calLoading,calTotal:!0},on:{"do-search":e.doSearch,"do-reset":e.doReset,"do-exportExcel":e.exportExcel,"do-calTotal":e.calTotal}})],1),e._v(" "),a("div",[a("Btable",{attrs:{listLoading:e.listLoading,data:e.list,configs:e.configs},on:{"do-handle":e.doHandle}})],1),e._v(" "),a("div",{staticClass:"container-footer"},[a("icon-page",{attrs:{total:e.total,pages:e.pages}}),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total,sizes, prev, pager, next, jumper","current-page":e.current_page,"page-sizes":[10,50,100,200],"page-size":e.pageSize,total:e.total},on:{"size-change":e.pageSizeChange,"current-change":e.goPage}})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible,width:"760px",title:e.reviewTitle},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"reviewForm",attrs:{model:e.reviewForm,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"订单号","label-width":e.formLabelWidth}},[e._v(e._s(e.handleData.id))])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"UID","label-width":e.formLabelWidth}},[e._v(e._s(e.handleData.uid))])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"币种","label-width":e.formLabelWidth}},[e._v(e._s(e.handleData.coinName))])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"提币数量","label-width":e.formLabelWidth}},[e._v(e._s(e.handleData.amount))])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手续费","label-width":e.formLabelWidth}},[e._v(e._s(e.handleData.fee))])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"到账数量","label-width":e.formLabelWidth}},[e._v(e._s(e.handleData.realAmount))])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"提币地址","label-width":e.formLabelWidth}},[e._v(e._s(e.handleData.toAddress))])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"提币二维码","label-width":e.formLabelWidth}},[a("div",{staticStyle:{width:"150px",height:"150px"}},[a("vue-qr",{attrs:{text:e.handleData.toAddress,margin:0,colorDark:"#000",colorLight:"#fff",size:150}})],1)])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"地址类型","label-width":e.formLabelWidth}},[e._v(e._s(1==e.handleData.isOwn?"内部交易":0==e.handleData.isOwn?"涉外交易":""))])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"提币时间","label-width":e.formLabelWidth}},[e._v(e._s(e.handleData.createTime))])],1)],1),e._v(" "),a("el-row"),e._v(" "),a("el-form-item",{attrs:{label:"订单状态","label-width":e.formLabelWidth}},[e._v(e._s(e._f("fStatus")(e.handleData.tradeStatus)))]),e._v(" "),a("el-row"),e._v(" "),parseInt(e.handleData.tradeStatus)>2||1==parseInt(e.handleData.tradeStatus)?a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"初审时间","label-width":e.formLabelWidth}},[e._v(e._s(e.handleData.firstAuditTime))])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"初审人","label-width":e.formLabelWidth}},[e._v(e._s(e.handleData.firstAuditUserName))])],1)],1):e._e(),e._v(" "),(parseInt(e.handleData.tradeStatus)>3||1==parseInt(e.handleData.tradeStatus))&&4!=parseInt(e.handleData.tradeStatus)?a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"复审时间","label-width":e.formLabelWidth}},[e._v(e._s(e.handleData.reviewAuditTime))])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"复审人","label-width":e.formLabelWidth}},[e._v(e._s(e.handleData.reviewAuditUserName))])],1)],1):e._e(),e._v(" "),a("el-row"),e._v(" "),"nextReview"===e.handleStatus?[a("el-form-item",{attrs:{label:"txId",prop:"txId","label-width":e.formLabelWidth}},[a("el-input",{attrs:{size:"medium"},model:{value:e.reviewForm.txId,callback:function(t){e.$set(e.reviewForm,"txId",t)},expression:"reviewForm.txId"}})],1)]:e._e(),e._v(" "),[1==parseInt(e.handleData.tradeStatus)?a("el-form-item",{attrs:{label:"Txid","label-width":e.formLabelWidth}},[a("span",[e._v(e._s(e.handleData.txId)+" ")]),e._v(" "),e.isModify?a("el-input",{attrs:{disabled:!0},model:{value:e.handleData.txId,callback:function(t){e.$set(e.handleData,"txId",t)},expression:"handleData.txId"}}):e._e()],1):e._e()],e._v(" "),e.handleData.tradeStatus>2||1==parseInt(e.handleData.tradeStatus)?a("el-form-item",{attrs:{label:"初审备注","label-width":e.formLabelWidth}},[e._v(e._s(e.handleData.firstRemark))]):e._e(),e._v(" "),(e.handleData.tradeStatus>3||1==parseInt(e.handleData.tradeStatus))&&4!=parseInt(e.handleData.tradeStatus)?a("el-form-item",{attrs:{label:"复审备注","label-width":e.formLabelWidth}},[e._v(e._s(e.handleData.reviewRemark))]):e._e()],2),e._v(" "),a("div",{staticClass:"inner-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){t.stopPropagation(),e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return t.stopPropagation(),e.confirmReview(t)}}},[e._v(e._s(e.confirmText))])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.rejectVisible,width:"500px",title:"驳回"},on:{"update:visible":function(t){e.rejectVisible=t}}},[a("el-form",{ref:"rejectForm",attrs:{model:e.rejectForm,rules:e.rejectRules}},[a("el-form-item",{attrs:{label:"驳回理由",prop:"mark"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入拒绝理由"},model:{value:e.rejectForm.mark,callback:function(t){e.$set(e.rejectForm,"mark",t)},expression:"rejectForm.mark"}})],1)],1),e._v(" "),a("div",{staticClass:"inner-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){t.stopPropagation(),e.rejectVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.rejLoading},on:{click:function(t){return t.stopPropagation(),e.confirmReject(t)}}},[e._v("驳回")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"验证收款码",visible:e.qrcodeShow,width:"500px"},on:{"update:visible":function(t){e.qrcodeShow=t}}},[a("div",{staticStyle:{"padding-left":"20px",width:"100%"}},[a("vue-qr",{attrs:{text:e.analysisQrCode,margin:0,colorDark:"#000",colorLight:"#fff",size:420}})],1)])],1)},i=[],s=(a("a481"),a("ac6a"),a("96cf"),a("3b8d")),n=a("658f"),o=a.n(n),l=a("c249"),c=a("2fee"),d=a("f21b"),h=a("f9e1"),u=a("4ec3"),m=a("ca00"),p={name:"ExtractForeign",components:{Btable:c["a"],Bsearch:l["a"],vueQr:o.a,iconPage:d["a"]},data:function(){return{listLoading:!1,btnLoading:!1,rejLoading:!1,excelLoading:!1,calLoading:!1,isModify:!1,list:[],dataList:[],toDay:"",ago:"",configs:[],searchCofig:[],search_params_obj:{},current_page:1,pageSize:this.$pageSize,total:0,pages:0,excelTitle:"外部提币记录列表",formLabelWidth:"120px",handleStatus:"",handleData:{},dialogVisible:!1,confirmText:"",reviewTitle:"",reviewForm:{txId:"",mark:""},rules:{txId:[{required:!0,message:"必填",trigger:"blur"}]},rejectVisible:!1,rejectForm:{mark:""},rejectRules:{mark:[{required:!0,message:"必填",trigger:"blur"}]},analysisQrCode:"",qrcodeShow:!1}},filters:{fStatus:function(e){var t="";switch(e){case 0:t="待审核";break;case 1:t="成功";break;case 2:t="失败";break;case 3:t="初步审核成功";break;case 4:t="初步审核失败";break;case 5:t="划转待确认";break;case 6:t="充币确认中";break}return t}},methods:{doHandle:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.fn,r=t.row,this.handleStatus=a,this.handleData=r,"preReview"===a||"nextReview"===a?(this.reviewTitle="preReview"===a?"提币初审":"提币复审",this.confirmText="preReview"===a?"初审通过":"复审通过",this.openReviewDialog()):"preReject"===a||"nextReject"===a?this.openRejectDialog():"detail"===a?(this.reviewTitle="提币详情",this.confirmText="确定",this.openReviewDialog()):"showqr"===a&&this.verify(r);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),openReviewDialog:function(){var e=this;this.dialogVisible=!0,this.$nextTick((function(){e.reviewForm={txId:"",mark:""},e.$refs["reviewForm"].resetFields()}))},openRejectDialog:function(){var e=this;this.rejectVisible=!0,this.$nextTick((function(){e.rejectForm={mark:""},e.$refs["rejectForm"].resetFields()}))},confirmReject:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs["rejectForm"].validate(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=8;break}return r={firstOrReview:"preReject"===t.handleStatus?1:2,auditStatus:2,auditOpinion:t.rejectForm.mark,id:t.handleData.id,txid:t.handleData.txId},t.rejLoading=!0,e.next=5,u["a"].auditWithdraw(r);case 5:i=e.sent,i&&(t.$message({message:"preReject"===t.handleStatus?"初审驳回成功":"复审驳回成功",type:"success"}),t.rejectVisible=!1,t.getList()),t.rejLoading=!1;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),confirmReview:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("detail"!==this.handleStatus){e.next=3;break}return this.dialogVisible=!1,e.abrupt("return");case 3:this.$refs["reviewForm"].validate(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=9;break}return r={firstOrReview:"preReview"===t.handleStatus?1:2,auditStatus:1,auditOpinion:"审核通过",id:t.handleData.id},"nextReview"===t.handleStatus&&(r.txId=t.reviewForm.txId),t.btnLoading=!0,e.next=6,u["a"].auditWithdraw(r);case 6:i=e.sent,i&&(t.$message({message:"preReview"===t.handleStatus?"初审成功":"复审成功",type:"success"}),t.dialogVisible=!1,t.getList()),t.btnLoading=!1;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),verify:function(e){this.analysisQrCode=e.toAddress,this.qrcodeShow=!0},doSearch:function(e){this.current_page=1,this.search_params_obj=e,this.getList()},doReset:function(){this.search_params_obj={},this.searchCofig.forEach((function(e){e["value"]=""})),this.searchCofig[0].value=[this.$util.dateFormat(this.ago,"YYYY/MM/DD HH:mm:ss"),this.$util.dateFormat(this.toDay,"YYYY/MM/DD HH:mm:ss")],this.getList()},exportExcel:function(e){this.search_params_obj=e.query;var t=e.num;m["a"].exportData.apply(this,[t])},pageSizeChange:function(e){this.current_page=1,this.pageSize=e,this.getList()},goPage:function(e){this.current_page=e,this.getList()},calTotal:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,r,i,s,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.search_params_obj=t,this.search_params_obj.coinId){e.next=4;break}return this.$message({type:"error",message:"币种必须选择!",duration:2e3}),e.abrupt("return");case 4:return this.calLoading=!0,a={isOwn:0},this.requiredParams(a),a.appId=0,Object.assign(a,this.search_params_obj),e.next=11,u["a"].getWithdrawSum(a);case 11:r=e.sent,r&&(i=r.data.data,i?(s=this.searchCofig[2]["list"].filter((function(e){return e.value==n.search_params_obj.coinId}))[0].label,this.$alert("<p>币种：".concat(s,"</p><p>提币数量总计：").concat(i.amountSum,"</p><p>手续费总计：").concat(i.feeSum,"</p><p>到账数量总计：").concat(i.realAmountSum,"</p>"),"统计结果",{dangerouslyUseHTMLString:!0}).catch((function(){}))):this.$message({type:"error",message:"数据列表为空!"})),this.calLoading=!1;case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i,s,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.listLoading){e.next=2;break}return e.abrupt("return");case 2:return t={pageNum:this.current_page,pageSize:this.pageSize,isOwn:0,appId:0},this.requiredParams(t),Object.assign(t,this.search_params_obj),this.listLoading=!0,e.next=8,u["a"].getWithdrawList(t);case 8:a=e.sent,a&&(r=a.data.data,i=r.records,s=r.total,n=r.current,o=r.pages,this.total=s,this.pages=o,this.current_page=n,this.list=i,this.dataList=i),this.listLoading=!1;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),queryData:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.excelLoading=!0,t.isOwn=0,t.appId=0,this.requiredParams(t),Object.assign(t,this.search_params_obj),e.next=7,u["a"].getWithdrawList(t);case 7:return a=e.sent,this.excelLoading=!1,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),formatTime:function(e){return~(e+"").indexOf("-")?e:e.replace(/\//gi,"-")},requiredParams:function(e){if(this.$util.isEmptyObject(this.search_params_obj)){var t=this.$util.dateFormat(this.ago,"YYYY/MM/DD HH:mm:ss"),a=this.$util.dateFormat(this.toDay,"YYYY/MM/DD HH:mm:ss");e.endTime=a.replace(/\//gi,"-"),e.startTime=t.replace(/\//gi,"-"),this.searchCofig[0].value=[t,a]}this.search_params_obj.startTime&&(this.search_params_obj.endTime=this.formatTime(this.search_params_obj.endTime),this.search_params_obj.startTime=this.formatTime(this.search_params_obj.startTime))}},mounted:function(){var e=this,t=this.$util.getAuthority("ExtractForeign",h["m"],h["n"]);this.configs=t.val,this.toDay=this.$util.diyTime("toDay"),this.ago=this.$util.diyTime("ago"),this.searchCofig=this.$util.clone(h["o"]),this.$store.dispatch("common/getCoinList").then((function(){e.searchCofig[2]["list"]=e.$store.state.common.coinlist})),this.getList()}},f=p,g=(a("a49b"),a("0c7c")),v=Object(g["a"])(f,r,i,!1,null,null,null);t["default"]=v.exports},a262:function(e,t,a){},a49b:function(e,t,a){"use strict";var r=a("a262"),i=a.n(r);i.a}}]);