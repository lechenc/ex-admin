(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a7e96f9"],{"32a6":function(e,t,a){var r=a("241e"),i=a("c3a1");a("ce7e")("keys",(function(){return function(e){return i(r(e))}}))},4908:function(e,t,a){},"8aae":function(e,t,a){a("32a6"),e.exports=a("584a").Object.keys},a4bb:function(e,t,a){e.exports=a("8aae")},a8db:function(e,t,a){"use strict";var r=a("e265"),i=a.n(r),n=a("a4bb"),s=a.n(n);function o(e,t){if(null==e)return{};var a,r,i={},n=s()(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(i[a]=e[a]);return i}function c(e,t){if(null==e)return{};var a,r,n=o(e,t);if(i.a){var s=i()(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}a.d(t,"a",(function(){return c}))},c5f0a:function(e,t,a){"use strict";var r=a("4908"),i=a.n(r);i.a},ce7e:function(e,t,a){var r=a("63b6"),i=a("584a"),n=a("294c");e.exports=function(e,t){var a=(i.Object||{})[e]||Object[e],s={};s[e]=t(a),r(r.S+r.F*n((function(){a(1)})),"Object",s)}},dccc:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"account-container"},[a("div",{staticClass:"container-top"},[a("Bsearch",{attrs:{configs:e.searchCofig},on:{"do-search":e.doSearch,"do-reset":e.doReset}})],1),e._v(" "),e.isCURDAuth?a("div",{staticClass:"container-btn"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.addLine}},[e._v("添加永久积分")])],1):e._e(),e._v(" "),a("div",[a("Btable",{attrs:{listLoading:e.listLoading,data:e.list,configs:e.configs},on:{"do-handle":e.doHandle}})],1),e._v(" "),a("div",{staticClass:"container-footer"},[a("icon-page",{attrs:{total:e.total,pages:e.pages}}),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.current_page,"page-size":e.pageSize,total:e.total},on:{"current-change":e.goPage}})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible,width:"500px",title:e.title},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"UID",prop:"uid","label-width":e.labelWidth}},[a("el-input",{attrs:{type:"text",placeholder:"请输入"},on:{blur:e.getBalance},model:{value:e.form.uid,callback:function(t){e.$set(e.form,"uid",t)},expression:"form.uid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"永久积分余额","label-width":e.labelWidth}},[a("el-input",{attrs:{type:"text",placeholder:"请输入",disabled:!0,value:e.balance}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数量",prop:"amount","label-width":e.labelWidth}},[a("el-input",{attrs:{type:"number",placeholder:"数量"},model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}},[a("el-select",{staticStyle:{width:"90px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.form.select,callback:function(t){e.$set(e.form,"select",t)},expression:"form.select"}},[a("el-option",{attrs:{label:"+",value:"+"}}),e._v(" "),a("el-option",{attrs:{label:"-",value:"-"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"原因",prop:"remark","label-width":e.labelWidth}},[a("el-input",{attrs:{type:"textarea",rows:"5",placeholder:""},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"inner-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){t.stopPropagation(),e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return t.stopPropagation(),e.confirmOp(t)}}},[e._v("确定")])],1)],1)],1)},i=[],n=(a("8e6e"),a("456d"),a("bd86")),s=a("a8db"),o=(a("ac6a"),a("96cf"),a("3b8d")),c=a("c249"),l=a("2fee"),u=a("f21b"),m=a("64bf"),h=a("4ec3");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={name:"WarehouseIntegral",components:{Btable:l["a"],Bsearch:c["a"],iconPage:u["a"]},data:function(){return{isCURDAuth:!0,btnLoading:!1,listLoading:!1,list:[],configs:[],searchCofig:[],search_params_obj:{},current_page:1,pageSize:10,total:0,pages:0,toDay:"",ago:"",title:"添加永久积分",labelWidth:"110px",dialogVisible:!1,form:{uid:"",select:"+",amount:"",remark:""},rules:{mark:[{required:!0,message:"必填",trigger:"blur"}]},balance:0}},methods:{doHandle:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.fn,r=t.row,"detail"==a&&this.$router.push({path:"/warehouse/integralDetail",query:{id:r.uid}});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),doSearch:function(e){this.current_page=1,this.search_params_obj=e,this.search_params_obj.startTime||this.search_params_obj.endTime||(this.search_params_obj.flag=1),this.getList()},doReset:function(){this.search_params_obj={},this.searchCofig.forEach((function(e){e["value"]=""})),this.searchCofig[0].value=[this.$util.dateFormat(this.ago,"YYYY/MM/DD HH:mm:ss"),this.$util.dateFormat(this.toDay,"YYYY/MM/DD HH:mm:ss")],this.getList()},goPage:function(e){this.current_page=e,this.getList()},addLine:function(){var e=this;this.formName="添加永久积分",this.dialogVisible=!0,this.$nextTick((function(){e.form={uid:"",select:"",amount:"",remark:""},e.$refs["form"].resetFields()}))},confirmOp:function(){var e=this;this.form.select?this.$refs["form"].validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){var r,i,n,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=11;break}return r=e.form,r.select,i=r.amount,n=Object(s["a"])(r,["select","amount"]),o=f({amount:"+"==e.form.select?i:"-"+i},n),e.btnLoading=!0,t.next=6,h["a"].warehouseEditIntegralPermanent(o);case 6:c=t.sent,c&&(e.$message({message:"添加成功",type:"success"}),e.dialogVisible=!1,e.getList()),e.btnLoading=!1,t.next=12;break;case 11:return t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):this.$message({message:"请先选择数量加减",type:"error"})},getBalance:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.form.uid){e.next=3;break}return this.$message({message:"请填写uid",type:"error"}),e.abrupt("return");case 3:return e.next=5,h["a"].warehouseUserIntegralPermanent({uid:this.form.uid});case 5:t=e.sent,t&&(this.balance=t.data.data&&t.data.data.permanentPoint);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getList:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.listLoading){e.next=2;break}return e.abrupt("return");case 2:return t={pageNum:this.current_page,pageSize:this.pageSize},this.requiredParams(t),Object.assign(t,this.search_params_obj),this.listLoading=!0,e.next=8,h["a"].warehousebonusIntegral(t);case 8:a=e.sent,a&&(r=a.data.data,i=r.records,n=r.total,s=r.current,o=r.pages,i.length>0&&i.forEach((function(e){e.emblemOld=e.emblem,e.emblem=e.emblem&&e.emblem>0?"加加林"+e.emblem:"--"})),this.list=i,this.total=n,this.current_page=s,this.pages=o),this.listLoading=!1;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),formatTime:function(e){return~(e+"").indexOf("/")?parseInt(new Date(e).getTime()/1e3):e},requiredParams:function(e){this.$util.isEmptyObject(this.search_params_obj)&&(e.endTime=parseInt(new Date(this.toDay).getTime()/1e3),e.startTime=parseInt(new Date(this.ago).getTime()/1e3),this.searchCofig[0].value=[this.$util.dateFormat(this.ago,"YYYY/MM/DD HH:mm:ss"),this.$util.dateFormat(this.toDay,"YYYY/MM/DD HH:mm:ss")]),this.search_params_obj.startTime&&(this.search_params_obj.endTime=this.formatTime(this.search_params_obj.endTime),this.search_params_obj.startTime=this.formatTime(this.search_params_obj.startTime))}},mounted:function(){var e=this.$util.getAuthority("WarehouseIntegral",m["j"],m["integralColNoBtin"]);this.configs=e.val,this.isCURDAuth=e.isAdd,this.toDay=this.$util.diyTime("toDay"),this.ago=this.$util.diyTime("ago"),this.searchCofig=this.$util.clone(m["l"]),this.getList()}},b=d,g=(a("c5f0a"),a("0c7c")),v=Object(g["a"])(b,r,i,!1,null,null,null);t["default"]=v.exports},e265:function(e,t,a){e.exports=a("ed33")},ed33:function(e,t,a){a("014b"),e.exports=a("584a").Object.getOwnPropertySymbols}}]);