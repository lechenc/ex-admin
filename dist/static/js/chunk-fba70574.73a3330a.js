(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fba70574"],{7514:function(t,e,a){"use strict";var i=a("5ca1"),n=a("0a49")(5),r="find",o=!0;r in[]&&Array(1)[r]((function(){o=!1})),i(i.P+i.F*o,"Array",{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(r)},"87f3":function(t,e,a){var i=a("5ca1");i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},9278:function(t,e,a){var i=a("5ca1");i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},"97dd":function(t,e,a){"use strict";var i=a("d470"),n=a.n(i);n.a},d470:function(t,e,a){},e8ab:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hotWalletExtract-container"},[a("div",{staticClass:"container-top"}),t._v(" "),t.warnList.length?a("el-card",{staticClass:"container-warn"},t._l(t.warnList,(function(e,i){return a("p",{key:i},[t._v("\n      "+t._s(e.chain+"-"+e.coin+"热钱包地址余额不足，请尽快补充")+"\n    ")])})),0):t._e(),t._v(" "),a("div",{staticClass:"container-btn"},[t.isCURDAuth?a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.addChain}},[t._v("添加")]):t._e(),t._v(" "),a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"medium"},on:{click:t.getList}},[t._v("刷新")])],1),t._v(" "),a("div",[a("Btable",{attrs:{"list-loading":t.listLoading,data:t.list,configs:t.configs},on:{"do-handle":t.doHandle}})],1),t._v(" "),a("div",{staticClass:"container-footer"},[a("icon-page",{attrs:{total:t.total,pages:t.pages}}),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"total,sizes, prev, pager, next, jumper","current-page":t.current_page,"page-sizes":[10,50,100,200],"page-size":t.pageSize,total:t.total},on:{"size-change":t.pageSizeChange,"current-change":t.goPage}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.formName,width:"500px",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"chainForm",attrs:{model:t.chainForm,rules:t.rules,"validate-on-rule-change":!1}},[a("el-form-item",{attrs:{label:"链名称","label-width":t.formLabelWidth,prop:"chain"}},[a("el-select",{attrs:{disabled:t.isEdit,placeholder:"请选择"},on:{change:t.chainChange},model:{value:t.chainForm.chain,callback:function(e){t.$set(t.chainForm,"chain",e)},expression:"chainForm.chain"}},t._l(t.chainList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.label}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"币种","label-width":t.formLabelWidth,prop:"coin"}},[a("el-select",{attrs:{disabled:t.isEdit,placeholder:"请选择"},model:{value:t.chainForm.coin,callback:function(e){t.$set(t.chainForm,"coin",e)},expression:"chainForm.coin"}},t._l(t.coinList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.label}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"单笔限额","label-width":t.formLabelWidth,prop:"maxAutoWithdraw"}},[a("el-input",{attrs:{placeholder:"请输入",autocomplete:"off",type:"number"},on:{input:function(e){return t.checkVal("maxAutoWithdraw")}},model:{value:t.chainForm.maxAutoWithdraw,callback:function(e){t.$set(t.chainForm,"maxAutoWithdraw",e)},expression:"chainForm.maxAutoWithdraw"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"单日限额","label-width":t.formLabelWidth,prop:"maxDailyAutoWithdraw"}},[a("el-input",{attrs:{placeholder:"请输入",autocomplete:"off",type:"number"},on:{input:function(e){return t.checkVal("maxDailyAutoWithdraw")}},model:{value:t.chainForm.maxDailyAutoWithdraw,callback:function(e){t.$set(t.chainForm,"maxDailyAutoWithdraw",e)},expression:"chainForm.maxDailyAutoWithdraw"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"热钱包启用开关","label-width":t.formLabelWidth}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.changeStauus},model:{value:t.chainForm.status,callback:function(e){t.$set(t.chainForm,"status",e)},expression:"chainForm.status"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"白天热钱包启用时间","label-width":t.formLabelWidth,prop:"dayTime"}},[a("el-time-picker",{attrs:{"is-range":"","value-format":"HH:mm:ss",format:"HH:mm:ss",disabled:!t.chainForm.status,"range-separator":"至","start-placeholder":"选择开始时间","end-placeholder":"选择结束时间",placeholder:"选择时间范围"},model:{value:t.chainForm.dayTime,callback:function(e){t.$set(t.chainForm,"dayTime",e)},expression:"chainForm.dayTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"夜间热钱包启用时间","label-width":t.formLabelWidth,prop:"nightTime"}},[a("el-time-picker",{attrs:{"is-range":"","value-format":"HH:mm:ss",format:"HH:mm:ss",disabled:!t.chainForm.status,"range-separator":"至","start-placeholder":"选择开始时间","end-placeholder":"选择结束时间",placeholder:"选择时间范围"},model:{value:t.chainForm.nightTime,callback:function(e){t.$set(t.chainForm,"nightTime",e)},expression:"chainForm.nightTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"每个用户夜间可使用提币次数","label-width":t.formLabelWidth,prop:"userNightWithdrawTimes"}},[a("el-input",{attrs:{placeholder:"请输入",autocomplete:"off",type:"number"},on:{input:function(e){return t.checkVal("userNightWithdrawTimes")}},model:{value:t.chainForm.userNightWithdrawTimes,callback:function(e){t.$set(t.chainForm,"userNightWithdrawTimes",e)},expression:"chainForm.userNightWithdrawTimes"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"每个用户夜间单次可提币限额","label-width":t.formLabelWidth,prop:"userNightWithdrawAmount"}},[a("el-input",{attrs:{placeholder:"请输入",autocomplete:"off",type:"number"},on:{input:function(e){return t.checkVal("userNightWithdrawAmount")}},model:{value:t.chainForm.userNightWithdrawAmount,callback:function(e){t.$set(t.chainForm,"userNightWithdrawAmount",e)},expression:"chainForm.userNightWithdrawAmount"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"每个用户夜间可使用提币总额","label-width":t.formLabelWidth,prop:"userNightWithdrawAmountTotal"}},[a("el-input",{attrs:{placeholder:"请输入",autocomplete:"off",type:"number"},on:{input:function(e){return t.checkVal("userNightWithdrawAmountTotal")}},model:{value:t.chainForm.userNightWithdrawAmountTotal,callback:function(e){t.$set(t.chainForm,"userNightWithdrawAmountTotal",e)},expression:"chainForm.userNightWithdrawAmountTotal"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"钱包余额低于该参数值提醒值","label-width":t.formLabelWidth,prop:"alarmBalance"}},[a("el-input",{attrs:{placeholder:"请输入",autocomplete:"off",type:"number"},on:{input:function(e){return t.checkVal("alarmBalance")}},model:{value:t.chainForm.alarmBalance,callback:function(e){t.$set(t.chainForm,"alarmBalance",e)},expression:"chainForm.alarmBalance"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"谷歌验证码","label-width":t.formLabelWidth,prop:"googleCode"}},[a("el-input",{staticClass:"my-mumber-input",attrs:{placeholder:"请输入",autocomplete:"off",type:"text"},on:{input:function(e){return t.checkVal3("chainForm","googleCode")}},model:{value:t.chainForm.googleCode,callback:function(e){t.$set(t.chainForm,"googleCode",e)},expression:"chainForm.googleCode"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:t.confirmOp}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogSetVisible,width:"700px",title:"查看余额"},on:{"update:visible":function(e){t.dialogSetVisible=e}}},[a("el-row",{staticStyle:{"margin-bottom":"22px"}},[a("el-col",{attrs:{span:6}},[t._v("\n        链类型名称: "),a("span",{staticStyle:{color:"#4390ff"}},[t._v(t._s(t.protocol))])]),t._v(" "),a("el-col",{attrs:{span:6}},[t._v("\n        币种名称: "),a("span",{staticStyle:{color:"#4390ff"}},[t._v(t._s(t.coinKey))])])],1),t._v(" "),a("Btable",{attrs:{"list-loading":t.setListLoading,data:t.setlist,configs:t.setConfigs}})],1),t._v(" "),a("el-dialog",{attrs:{title:"删除确认",width:"500px",visible:t.deleteDialogFormVisible},on:{"update:visible":function(e){t.deleteDialogFormVisible=e}}},[a("el-form",{ref:"deleteForm",attrs:{model:t.deleteForm,rules:t.deletRules}},[a("el-form-item",{attrs:{label:"谷歌验证码","label-width":t.formLabelWidth,prop:"googleCode"}},[a("el-input",{staticClass:"my-mumber-input",attrs:{placeholder:"请输入",autocomplete:"off",type:"text"},on:{input:function(e){return t.checkVal3("deleteForm","googleCode")}},model:{value:t.deleteForm.googleCode,callback:function(e){t.$set(t.deleteForm,"googleCode",e)},expression:"deleteForm.googleCode"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.deleteDialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.deleteBtnLoading},on:{click:t.deleteConfirmOp}},[t._v("确 定")])],1)],1)],1)},n=[],r=(a("8e6e"),a("c5f6"),a("28a5"),a("bd86")),o=(a("6762"),a("a481"),a("96cf"),a("3b8d")),s=(a("ac6a"),a("456d"),a("c249")),l=a("2fee"),c=a("f21b"),h=a("f9e1"),u=a("ed08"),m=a("4ec3");a("b719");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var f={name:"CoinWhiteList",components:{Btable:l["a"],Bsearch:s["a"],iconPage:c["a"]},filters:{typeTime:function(t){return t?Object(u["a"])(t):""}},data:function(){return{isCURDAuth:!1,btnLoading:!1,btnLoading2:!1,listLoading:!1,list:[],configs:[],searchCofig:[],search_params_obj:{},current_page:1,pageSize:this.$pageSize,total:0,pages:0,dialogFormVisible:!1,chainForm:{id:"",coin:"",chain:"",maxAutoWithdraw:"",maxDailyAutoWithdraw:"",status:!1,googleCode:"",dayTime:"",nightTime:"",userNightWithdrawTimes:"",userNightWithdrawAmount:"",userNightWithdrawAmountTotal:"",alarmBalance:""},formName:"",formLabelWidth:"125px",labelWidth:"125px",dialogSetVisible:!1,setListLoading:!1,setConfigs:[],setlist:[],coinKey:"",protocol:"",chainList:[],chainCoinObj:{},isEdit:!1,deleteDialogFormVisible:!1,deleteForm:{},deleteBtnLoading:!1,deletRules:{googleCode:[{required:!0,message:"必填",trigger:"blur"}]},warnList:[],coin_List:[]}},computed:{coinList:function(){if(this.chainForm.chain&&this.chainCoinObj[this.chainForm.chain]){var t=this.chainCoinObj[this.chainForm.chain].map((function(t){return{label:t.coinName,value:t.coinId}}));return t}return[]},rules:function(){this.chainForm.status;var t=Object.keys(this.chainForm),e={};return t.forEach((function(t){e[t]=[{required:!0,message:"必填",trigger:"blur"}]})),e}},mounted:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this.$util.getAuthority("HotWalletExtract",h["u"],h["v"]),this.configs=e.val,this.isCURDAuth=e.isAdd,this.setConfigs=h["w"],this.getList(),this.getSymbolList();case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{getSymbolList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$store.dispatch("common/getCoinList").then((function(){e.coin_List=e.$store.state.common.coinlist}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),deleteConfirmOp:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,i,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.deleteForm,a=e.googleCode,i=e.id,n={id:i,googleCode:a},t.next=4,m["a"].apiDelHotWalletExtract(n);case 4:r=t.sent,r&&(this.$message({type:"success",message:"删除成功!"}),this.deleteDialogFormVisible=!1,this.getList());case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),pageSizeChange:function(t){this.current_page=1,this.pageSize=t,this.getList()},changeStauus:function(){this.$refs.chainForm.clearValidate()},chainChange:function(t){this.chainForm.coin=""},checkVal3:function(t,e){this[t][e]=(this[t][e]+"").replace(/[^\d]/g,"")},checkVal:function(t){var e=["maxAutoWithdraw","userNightWithdrawAmount","userNightWithdrawAmountTotal","maxDailyAutoWithdraw","alarmBalance"];e.includes(t)?this.chainForm[t]=(this.chainForm[t]+"").replace(/^(\-)*(\d+)\.(\d{0,8}).*$/,"$2.$3"):"userNightWithdrawTimes"===t&&(this.chainForm[t]=(parseInt(this.chainForm[t])+"").replace(/^(\-)*(\d{0,4}).*$/,"$2")),this.chainForm[t]<0&&(this.chainForm[t]=0)},doHandle:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,i,n,r,s,l,c=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.fn,i=e.row,"edit"===a&&(this.isEdit=!0,this.formName="编辑",this.dialogFormVisible=!0,this.getChainCoin(),this.$nextTick((function(){c.$refs["chainForm"].resetFields();var t=Object.keys(c.chainForm);t.forEach((function(t){c.chainForm[t]=i[t]})),c.chainForm.status=!!i["status"],c.chainForm.googleCode="",c.chainForm.dayTime=i["dayEnableTimeStart"]?[i["dayEnableTimeStart"],i["dayEnableTimeEnd"]]:"",c.chainForm.nightTime=i["nightEnableTimeStart"]?[i["nightEnableTimeStart"],i["nightEnableTimeEnd"]]:""}))),"checkBalance"===a&&(n=i.chain,r=i.coin,this.dialogSetVisible=!0,s=m["a"].apiHotWalletExtractCheckChain({protocol:i.chain}),this.setlist=[],this.protocol=n,this.coinKey=r,l=m["a"].apiHotWalletExtractCheckDetail,s.then((function(t){var e=t.data.data;e instanceof Array&&e.forEach((function(t,e){c.setlist.push({address:t}),l({protocol:n,coinKey:r,address:t}).then((function(t){var a=t.data.data;c.$set(c.setlist,e,p({},c.setlist[e],{},a))}))}))}))),"delete"===a&&this.$confirm("确定删除？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:c.deleteDialogFormVisible=!0,c.$nextTick((function(){c.deleteForm={id:i.id,googleCode:""}}));case 2:case"end":return t.stop()}}),t)})))).catch((function(){}));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getWarnList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,a){var i,n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.warnList=[],i=m["a"].apiHotWalletExtractCheckChain({protocol:e}),n=m["a"].apiHotWalletExtractCheckDetail,i.then((function(t){var i=t.data.data;i instanceof Array&&i.forEach((function(t,i){n({protocol:e,coinKey:a,address:t}).then((function(t){var i=t.data.data;parseFloat(i.amount)<parseFloat(i.alarmBalance)&&r.warnList.push({chain:e,coin:a})}))}))}));case 4:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),addChain:function(){var t=this;this.isEdit=!1,this.formName="添加",this.dialogFormVisible=!0,this.chainList=[],this.getChainCoin(),this.$nextTick((function(){t.$refs["chainForm"].resetFields();var e=Object.keys(t.chainForm);e.forEach((function(e){t.chainForm[e]=""})),t.chainForm["status"]=!1}))},confirmOp:function(){var t=this;this.$refs["chainForm"].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){var i,n,r,o,s,l,c,h,u,d,f,g,b,v,w,F,y,x;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=34;break}if(i=t.chainForm,n=i.id,r=i.status,o=i.dayTime,s=i.nightTime,l=i.coin,!r){e.next=13;break}if(c=o[0].split(":").join(""),h=o[1].split(":").join(""),u=s[0].split(":").join(""),d=s[1].split(":").join(""),!(Number(d)>Number(h)&&Number(h)>Number(u))){e.next=10;break}return t.$message.error("白天热钱包启用时间和夜间启用时间不得重复交叉"),e.abrupt("return");case 10:if(!(Number(h)>Number(d)&&Number(d)>Number(c))){e.next=13;break}return t.$message.error("白天热钱包启用时间和夜间启用时间不得重复交叉"),e.abrupt("return");case 13:if(f=o?o[0]:"",g=o?o[1]:"",b=s?s[0]:"",v=s?s[1]:"",w=t.coin_List.filter((function(t){return t.label==l}))[0].value,F=p({},t.chainForm,{status:r?1:0,dayEnableTimeStart:f,dayEnableTimeEnd:g,nightEnableTimeStart:b,nightEnableTimeEnd:v,coin:l,coinId:w}),delete F["dayTime"],delete F["nightTime"],t.btnLoading=!0,n){e.next=28;break}return e.next=25,m["a"].apiAddHotWalletExtract(p({},F));case 25:e.t0=e.sent,e.next=31;break;case 28:return e.next=30,m["a"].apiEditHotWalletExtract(p({},F,{id:n}));case 30:e.t0=e.sent;case 31:y=e.t0,y&&(x=n?"编辑成功":"新增成功",t.$message({message:x,type:"success"}),t.dialogFormVisible=!1,t.getList()),t.btnLoading=!1;case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},doSearch:function(t){this.current_page=1,this.search_params_obj=t,this.getList()},doReset:function(){this.search_params_obj={},this.searchCofig.forEach((function(t){t["value"]=""})),this.getList()},goPage:function(t){this.current_page=t,this.getList()},getList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,i,n,r,o,s,l=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.listLoading){t.next=2;break}return t.abrupt("return");case 2:return e={pageNum:this.current_page,pageSize:this.pageSize},Object.assign(e,this.search_params_obj),this.listLoading=!0,t.next=7,m["a"].apiGetHotWalletExtractList(e);case 7:a=t.sent,a?(i=a.data.data,n=i.records,r=i.total,o=i.current,s=i.pages,this.list=n.map((function(t){return p({},t,{isStatus:Boolean(t.status)})})),this.list.forEach((function(t){l.getWarnList(t.chain,t.coin)})),this.total=r,this.pages=s,this.current_page=o,this.listLoading=!1):this.listLoading=!1;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getChainCoin:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m["a"].apiGetChainCoinList({});case 2:if(e=t.sent,e)for(a in this.chainCoinObj=e.data.data,this.chainCoinObj)this.chainList.push({label:a,value:a});case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},g=f,b=(a("97dd"),a("0c7c")),v=Object(b["a"])(g,i,n,!1,null,"8f952a6a",null);e["default"]=v.exports}}]);