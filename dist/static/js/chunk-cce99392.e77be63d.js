(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cce99392"],{"32a6":function(e,t,r){var i=r("241e"),s=r("c3a1");r("ce7e")("keys",(function(){return function(e){return s(i(e))}}))},"76ae":function(e,t,r){},"8aae":function(e,t,r){r("32a6"),e.exports=r("584a").Object.keys},"9e99":function(e,t,r){"use strict";var i=r("76ae"),s=r.n(i);s.a},a4bb:function(e,t,r){e.exports=r("8aae")},a8db:function(e,t,r){"use strict";var i=r("e265"),s=r.n(i),o=r("a4bb"),a=r.n(o);function n(e,t){if(null==e)return{};var r,i,s={},o=a()(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(s[r]=e[r]);return s}function c(e,t){if(null==e)return{};var r,i,o=n(e,t);if(s.a){var a=s()(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}r.d(t,"a",(function(){return c}))},b783:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"businessLists-container"},[r("div",{staticClass:"container-top"},[r("Bsearch",{attrs:{configs:e.searchCofig},on:{"do-search":e.doSearch,"do-reset":e.doReset}})],1),e._v(" "),e.btnArr.length?r("div",{staticClass:"container-btn"},[e.btnArr.includes("add")?r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.addLine}},[e._v("添加子商务")]):e._e(),e._v(" "),e._e()],1):e._e(),e._v(" "),r("div",[r("Btable",{attrs:{listLoading:e.listLoading,data:e.list,configs:e.configs},on:{"do-handle":e.doHandle}})],1),e._v(" "),r("div",{staticClass:"container-footer"},[r("icon-page",{attrs:{total:e.total,pages:e.pages}}),e._v(" "),r("el-pagination",{attrs:{background:"",layout:"total,sizes, prev, pager, next, jumper","current-page":e.current_page,"page-sizes":[10,50,100,200],"page-size":e.pageSize,total:e.total},on:{"size-change":e.pageSizeChange,"current-change":e.goPage}})],1),e._v(" "),r("el-dialog",{attrs:{title:e.formName,width:"700px",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"cForm",attrs:{model:e.cForm,rules:e.rules}},[r("el-row",{attrs:{span:24}},[r("el-col",{attrs:{span:20}},[r("el-form-item",{attrs:{label:"上级商务商UID","label-width":e.formLabelWidth,prop:"username"}},[r("el-input",{attrs:{type:"text",placeholder:"请输入"},model:{value:e.cForm.username,callback:function(t){e.$set(e.cForm,"username","string"===typeof t?t.trim():t)},expression:"cForm.username"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{span:24}},[r("el-col",{attrs:{span:20}},[r("el-form-item",{attrs:{label:"子商务商UID","label-width":e.formLabelWidth,prop:"username"}},[r("el-input",{attrs:{type:"text",placeholder:"请输入"},model:{value:e.cForm.username,callback:function(t){e.$set(e.cForm,"username","string"===typeof t?t.trim():t)},expression:"cForm.username"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{span:24}},[r("el-col",{attrs:{span:20}},[r("el-form-item",{attrs:{label:"登录名","label-width":e.formLabelWidth,prop:"username"}},[r("el-input",{attrs:{type:"text",placeholder:"请输入"},model:{value:e.cForm.username,callback:function(t){e.$set(e.cForm,"username","string"===typeof t?t.trim():t)},expression:"cForm.username"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{span:24}},[r("el-col",{attrs:{span:20}},[r("el-form-item",{attrs:{label:"登录密码","label-width":e.formLabelWidth,prop:"password"}},[r("el-input",{attrs:{"show-password":"",type:"password",autocomplete:"off",placeholder:"请输入包含字母和数字的6-16位密码"},model:{value:e.cForm.password,callback:function(t){e.$set(e.cForm,"password","string"===typeof t?t.trim():t)},expression:"cForm.password"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{span:24}},[r("el-col",{attrs:{span:20}},[r("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth,prop:"username"}},[r("el-input",{attrs:{type:"text",placeholder:"请输入"},model:{value:e.cForm.username,callback:function(t){e.$set(e.cForm,"username","string"===typeof t?t.trim():t)},expression:"cForm.username"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{span:24}},[r("el-col",{attrs:{span:20}},[r("el-form-item",{attrs:{label:"手续费比例","label-width":e.formLabelWidth,prop:"username"}},[r("el-input",{attrs:{type:"text",placeholder:"请输入"},model:{value:e.cForm.username,callback:function(t){e.$set(e.cForm,"username","string"===typeof t?t.trim():t)},expression:"cForm.username"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{span:24}},[r("el-col",{attrs:{span:20}},[r("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"是否本人手续费返佣",prop:"selfCommission"}},[r("el-row",{attrs:{span:24}},[r("el-col",{attrs:{span:8}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.cForm.selfCommission,callback:function(t){e.$set(e.cForm,"selfCommission",t)},expression:"cForm.selfCommission"}},[r("el-option",{attrs:{value:0,label:"否"}}),e._v(" "),r("el-option",{attrs:{value:1,label:"是"}})],1)],1)],1)],1)],1)],1),e._v(" "),r("el-row",{attrs:{span:24}},[r("el-col",{attrs:{span:20}},[r("el-form-item",{attrs:{label:"手续费返佣结算时间","label-width":e.formLabelWidth,prop:"feeDelayDay"}},[r("el-row",{attrs:{span:24}},[r("el-col",{attrs:{span:8}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.delayUnitChange(e.cForm.feeDelayUnit,"feeDelayDay")}},model:{value:e.cForm.feeDelayUnit,callback:function(t){e.$set(e.cForm,"feeDelayUnit",t)},expression:"cForm.feeDelayUnit"}},e._l(e.delayUnitList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),r("el-col",{attrs:{span:16}},[r("el-input",{attrs:{disabled:3==e.cForm.feeDelayUnit,type:"text",placeholder:"请输入"},on:{input:function(t){return e.checkVal("feeDelayDay")}},model:{value:e.cForm.feeDelayDay,callback:function(t){e.$set(e.cForm,"feeDelayDay",t)},expression:"cForm.feeDelayDay"}})],1)],1)],1)],1)],1),e._v(" "),r("el-row",{attrs:{span:24}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"登录开关","label-width":e.formLabelWidth,prop:"loginSwitch"}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.cForm.loginSwitch,callback:function(t){e.$set(e.cForm,"loginSwitch",t)},expression:"cForm.loginSwitch"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"返佣开关","label-width":e.formLabelWidth,prop:"commissionSwitch"}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.cForm.commissionSwitch,callback:function(t){e.$set(e.cForm,"commissionSwitch",t)},expression:"cForm.commissionSwitch"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{span:24}},[r("el-col",{attrs:{span:20}},[r("el-form-item",{attrs:{label:"管理员谷歌验证码","label-width":e.formLabelWidth,prop:"googleCode"}},[r("el-input",{attrs:{autocomplete:"off",placeholder:"请输入谷歌验证码",type:"text"},model:{value:e.cForm.googleCode,callback:function(t){e.$set(e.cForm,"googleCode","string"===typeof t?t.trim():t)},expression:"cForm.googleCode"}})],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.confirmOp}},[e._v("确 定")])],1)],1)],1)},s=[],o=(r("8e6e"),r("456d"),r("bd86")),a=r("a8db"),n=(r("ac6a"),r("96cf"),r("3b8d")),c=r("c249"),l=r("2fee"),u=r("f21b"),h=r("65fc"),p=r("4ec3"),d=r("70ac"),m=r.n(d);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f={name:"BusinessLists",components:{Btable:l["a"],Bsearch:c["a"],iconPage:u["a"]},data:function(){var e=function(e,t,r){""==t?r(new Error("请输入密码")):/^[0-9A-Za-z]{6,20}$/g.test(t)||"******"===t?r():r(new Error("密码格式不正确，请重新输入(6-20位字符，不含特殊字符)"))},t=function(e,t,r){""==t?r(new Error("请输入账号")):/^[0-9A-Za-z]{6,20}$/g.test(t)?r():r(new Error("账号格式不正确，请重新输入(6-20位字符，不含特殊字符)"))};return{delayUnitList:[{label:"按周",value:1},{label:"按月",value:2},{label:"按日",value:3}],listLoading:!1,btnLoading:!1,calLoading:!1,list:[],configs:[],searchCofig:[],search_params_obj:{},current_page:1,pageSize:10,total:0,pages:0,toDay:"",ago:"",btnArr:[],agentModelList:[{label:"手续费模式",value:1}],agentLevelList:[],formLabelWidth:"140px",cForm:{userId:"",agentMode:"",level:"",username:"",password:"",googleStr:"",googleCode:"",commissionSwitch:!1,loginSwitch:!1,lowSwitch:!1,withdrawSwitch:!1,positionListSwitch:!1,closePositionListSwitch:!1,depositListSwitch:!1,withdrawListSwitch:!1,userAssetsSwitch:!1,otcSwitch:!1},rules:{agentMode:[{required:!0,message:"必填",trigger:"blur"}],level:[{required:!0,message:"必填",trigger:"blur"}],username:[{required:!0,message:"必填",trigger:"blur"},{required:!0,validator:t,trigger:"blur"}],password:[{required:!0,message:"必填",trigger:"blur"},{required:!0,validator:e,trigger:"blur"}],googleStr:[{required:!0,message:"必填",trigger:"blur"}],googleCode:[{required:!0,message:"必填",trigger:"blur"}]},formName:"",dialogFormVisible:!1,oldPwd:"",passwordType:"password",inputLevelTxt:"请先选择代理模式"}},watch:{"cForm.agentMode":{handler:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,p["a"].getLevelAgentMode({agentMode:1,businessType:1});case 3:i=e.sent,i&&(s=i.data.data.map((function(e){return{label:e["level"],value:e["level"]}})),this.agentLevelList=s,this.inputLevelTxt=this.agentLevelList.length?"请选择":"请先选择代理模式");case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()}},methods:{delayUnitChange:function(e,t){3==e?(this.cForm[t]=16,this.$refs["cForm"].validateField(t)):this.cForm[t]=""},onCopy:function(){this.$message.success("复制成功")},onError:function(){this.$message.success("复制失败")},doSearch:function(e){this.current_page=1,this.search_params_obj=e,this.getList()},doReset:function(){this.search_params_obj={},this.searchCofig.forEach((function(e){e["value"]=""})),this.getList()},pageSizeChange:function(e){this.current_page=1,this.pageSize=e,this.getList()},goPage:function(e){this.current_page=e,this.getList()},showPwd:function(){this.passwordType="password"===this.passwordType?"text":"password"},doHandle:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,i,s,o,a,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.fn,i=t.row,"detail"!==r){e.next=4;break}return this.$router.push({path:"/agent/businessListsDetail",query:{userId:i.userId}}),e.abrupt("return");case 4:if("trlogin"!==r&&"trclose"!==r&&"trlow"!==r){e.next=13;break}return s={trclose:function(){return{commissionSwitch:i.commissionSwitch?1:0}},trlogin:function(){return{loginSwitch:i.loginSwitch?1:0}},trlow:function(){return{lowSwitch:i.lowSwitch?1:0}}},o={userId:i.userId,businessType:1},Object.assign(o,s[r]()),e.next=10,p["a"].updateBusinessAgent(o);case 10:return a=e.sent,a?(this.$message({message:"操作成功",type:"success"}),this.getList()):this.getList(),e.abrupt("return");case 13:"edit"===r&&(this.formName="编辑商务",this.dialogFormVisible=!0,this.$nextTick((function(){n.$refs["cForm"].resetFields();var e=i.userId,t=i.agentMode,r=i.level,s=i.username,o=i.password,a=i.googleStr,c=i.googleCode,l=i.commissionSwitch,u=i.loginSwitch,h=i.lowSwitch,p=i.withdrawSwitch,d=i.positionListSwitch,m=i.closePositionListSwitch,g=i.depositListSwitch,w=i.withdrawListSwitch,f=i.userAssetsSwitch,b=i.otcSwitch;n.cForm={userId:e,agentMode:t,level:r,username:s,password:o,googleStr:a,googleCode:c,commissionSwitch:l,loginSwitch:u,lowSwitch:h,withdrawSwitch:p,positionListSwitch:d,closePositionListSwitch:m,depositListSwitch:g,withdrawListSwitch:w,userAssetsSwitch:f,otcSwitch:b},n.oldPwd=o,n.rules.agentMode[0].required=!1,n.rules.level[0].required=!1,n.rules.username[0].required=!1,n.rules.password[0].required=!1})));case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getGoogleCode:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={account:localStorage.getItem("user_name")},e.next=3,p["a"].getGoogleCode(t);case 3:r=e.sent,r&&(this.cForm.googleStr=r.data.data.secretKey,this.$nextTick((function(){i.$refs.cForm.validateField("googleStr")})));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addLine:function(){var e=this;this.formName="添加子商务",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs["cForm"].resetFields(),e.cForm={userId:"",agentMode:"",level:"",username:"",password:"",googleStr:"",googleCode:"",commissionSwitch:!1,loginSwitch:!1,lowSwitch:!1,withdrawSwitch:!1,positionListSwitch:!1,closePositionListSwitch:!1,depositListSwitch:!1,withdrawListSwitch:!1,userAssetsSwitch:!1,otcSwitch:!1},e.rules.agentMode[0].required=!0,e.rules.level[0].required=!0,e.rules.username[0].required=!0,e.rules.password[0].required=!0}))},confirmOp:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs["cForm"].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(r){var i,s,o,n,c,l,u,h,d,g,f,b,v,S,y,L,F;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=18;break}if(i=t.cForm,s=i.userId,o=i.password,n=i.commissionSwitch,c=i.loginSwitch,l=i.lowSwitch,u=i.withdrawSwitch,h=i.positionListSwitch,d=i.closePositionListSwitch,g=i.depositListSwitch,f=i.withdrawListSwitch,b=i.userAssetsSwitch,v=i.otcSwitch,S=Object(a["a"])(i,["userId","password","commissionSwitch","loginSwitch","lowSwitch","withdrawSwitch","positionListSwitch","closePositionListSwitch","depositListSwitch","withdrawListSwitch","userAssetsSwitch","otcSwitch"]),y=w({loginSwitch:c?1:0,commissionSwitch:n?1:0,lowSwitch:l?1:0,withdrawSwitch:u?1:0,positionListSwitch:h?1:0,closePositionListSwitch:d?1:0,depositListSwitch:g?1:0,withdrawListSwitch:f?1:0,userAssetsSwitch:b?1:0,otcSwitch:v?1:0},S),t.oldPwd===o&&""!==s||(y.password=m.a.md5(o)),""===s||Object.assign(y,{userId:s,businessType:1}),t.btnLoading=!0,""!==s){e.next=12;break}return e.next=9,p["a"].addBusinessUserInsert(y);case 9:e.t0=e.sent,e.next=15;break;case 12:return e.next=14,p["a"].updateBusinessAgent(y);case 14:e.t0=e.sent;case 15:L=e.t0,L&&(F=""===s?"新增成功":"编辑成功",t.$message({message:F,type:"success"}),t.dialogFormVisible=!1,t.getList()),t.btnLoading=!1;case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getList:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,i,s,o,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.listLoading){e.next=2;break}return e.abrupt("return");case 2:return t={pageNum:this.current_page,pageSize:this.pageSize},this.requiredParams(t),Object.assign(t,this.search_params_obj),this.listLoading=!0,e.next=8,p["a"].getBusinessList(t);case 8:r=e.sent,r&&(i=r.data.data,s=i.records,o=i.total,a=i.current,n=i.pages,this.total=o,this.pages=n,this.current_page=a,s.forEach((function(e){e["loginSwitch"]=!!e["loginSwitch"],e["commissionSwitch"]=!!e["commissionSwitch"]})),this.list=s),this.listLoading=!1;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),requiredParams:function(e){},formatTime:function(e){return~(e+"").indexOf("/")?parseInt(new Date(e).getTime()/1e3):e}},mounted:function(){var e=this.$util.getAuthority("BusinessLists",h["n"],h["o"]);this.configs=e.val,this.btnArr=e.btnArr||[],this.searchCofig=this.$util.clone(h["p"]),console.log("authObj",e),this.toDay=this.$util.diyTime("toDay"),this.ago=this.$util.diyTime("ago"),this.getList()}},b=f,v=(r("9e99"),r("0c7c")),S=Object(v["a"])(b,i,s,!1,null,null,null);t["default"]=S.exports},ce7e:function(e,t,r){var i=r("63b6"),s=r("584a"),o=r("294c");e.exports=function(e,t){var r=(s.Object||{})[e]||Object[e],a={};a[e]=t(r),i(i.S+i.F*o((function(){r(1)})),"Object",a)}},e265:function(e,t,r){e.exports=r("ed33")},ed33:function(e,t,r){r("014b"),e.exports=r("584a").Object.getOwnPropertySymbols}}]);