(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a773a53c"],{"196f":function(e,t,r){},7514:function(e,t,r){"use strict";var a=r("5ca1"),o=r("0a49")(5),n="find",i=!0;n in[]&&Array(1)[n]((function(){i=!1})),a(a.P+a.F*i,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")(n)},"87f3":function(e,t,r){var a=r("5ca1");a(a.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},"91f2":function(e,t,r){"use strict";var a=r("196f"),o=r.n(a);o.a},9278:function(e,t,r){var a=r("5ca1");a(a.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},c270:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAB4UlEQVRoQ+1ZMU7EMBC0BaKipYKaXyAFHkKRh0XiGzRY4gE0dLTQcDUlZ5TIiTZRNp4JTiB3vu6i9dqzM7ubja3Z+M9u/PzmsAAUlX+ay4gr7W27tqi8M8b4+r98Ln2n2qvHQHBazAHhStv5KirfHD4AGGVZ2pD7ORmUwwUgI6pFiI00y9JAci2rGAMZQAifxhLCXjIG2ENoCRqT0E3lL06MeREF4EpUtvkSWhnAZzj0hyttBjBZollmFE3Xza4p57WEpM1zaXdJJMSWUSRBEZtkSbxJAGR772RQr2OrELkX1shIpxkAETCdAcIJbMomK+w4GC4+0GQAEUqSzQNyn9g7z/BMSEMUa5apQhlAiIDGHsRA7F1lqklpUkXkhCS6sMHKKKlLNdUygBAamgG2oSD27KcUZC5fvJFpeYUA3jyAs1NzPgb08d5+tc+TNTKg/PXOEovu3YO/3H+b9xEAb6601xnAMDILMfA6wsAOYiBG8bCpIQA0n0gj05JezYEMYCRkf8YA8lrBMsb2AagTywuOVO8wqRrZcQPQ6Eak9QupaJ9qsImM1TRSRhPNDEcCAKF+xTm4t9W/u6Uk5ReVEBv8xn5w0d1dmCMX3draiZzpLtVXHWhmRSayKANYIqqMzx/S2sFPO9G+rAAAAABJRU5ErkJggg=="},cd08:function(e,t,r){"use strict";r.d(t,"h",(function(){return g})),r.d(t,"i",(function(){return f})),r.d(t,"l",(function(){return b})),r.d(t,"m",(function(){return h})),r.d(t,"f",(function(){return p})),r.d(t,"g",(function(){return m})),r.d(t,"j",(function(){return l})),r.d(t,"k",(function(){return u})),r.d(t,"n",(function(){return a})),r.d(t,"o",(function(){return o})),r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return d}));var a=[{label:"角色名称",prop:"name"},{label:"用户数",prop:"userNumber"},{label:"添加时间",prop:"createTime",type:"time"},{label:"角色权限开关",prop:"status",type:"switch",fn:"switchCoin",alias:"trroleauth"},{label:"操作",prop:"action",type:"action",btnGroup:[{label:"修改/授权",fn:"edit",type:"primary",alias:"edit"},{label:"删除",fn:"delete",type:"danger",alias:"del"}]}],o=[{label:"角色名称",prop:"name"},{label:"用户数",prop:"userNumber"},{label:"添加时间",prop:"createTime",type:"time"}],n=[{label:"账号",prop:"account"},{label:"角色",prop:"roleName"},{label:"添加时间",prop:"createTime",type:"time"},{label:"操作",prop:"action",type:"action",width:140,btnGroup:[{label:"编辑",fn:"edit",type:"primary",alias:"edit"},{label:"删除",fn:"delete",type:"danger",alias:"del"}]}],i=[{label:"账号",prop:"account"},{label:"角色",prop:"roleName"},{label:"添加时间",prop:"createTime",type:"time"}],s=[{type:"text",label:"账号",prop:"account",value:"",placeHolder:"请输入账号"}],l=[{label:"操作人员",prop:"account"},{label:"角色",prop:"roleName"},{label:"内容",prop:"content"},{label:"请求地址",prop:"requestAddress"},{label:"IP",prop:"userIp"},{label:"时间",prop:"createTime",type:"time"},{label:"操作",prop:"action",type:"action",btnGroup:[{label:"详情",fn:"detail",type:"primary",alias:"detail"}]}],u=[{type:"date_rank",label:"时间",prop:"startTime",prop2:"endTime",value:""},{type:"text",label:"账号",prop:"account",value:""},{type:"text",label:"角色",prop:"roleName",value:""},{type:"text",label:"内容",prop:"content",value:""},{type:"text",label:"请求地址",prop:"requestAddress",value:""},{type:"text",label:"IP",prop:"userIp",value:""}],c=[{label:"路径名称",prop:"name"},{label:"请求路径",prop:"requestUrl"},{label:"操作",prop:"action",type:"action",width:150,btnGroup:[{label:"编辑",fn:"edit",type:"primary",alias:"primary"},{label:"删除",fn:"del",type:"danger",alias:"del"}]}],d=[{type:"text",label:"路径名称",prop:"name",value:""},{type:"text",label:"请求路径",prop:"requestUrl",value:""}],p=[{label:"域名地址",prop:"domainName"},{label:"排序",prop:"sort"},{label:"是否默认",prop:"isDefault",type:"switch",fn:"trDefault",alias:"trDefault"},{label:"备注",prop:"remark"},{label:"创建时间",prop:"createTime",type:"time"},{label:"操作",prop:"action",width:"240",type:"action",btnGroup:[{label:"编辑",fn:"edit",type:"primary",alias:"edit"},{label:"详情",fn:"detail",type:"primary",alias:"detail"},{label:"删除",fn:"del",type:"danger",alias:"del"}]}],m=[{label:"域名地址",prop:"domainName"},{label:"排序",prop:"sort"},{label:"备注",prop:"remark"},{label:"创建时间",prop:"createTime",type:"time"}],g=[{label:"固定域名地址",prop:"domainName"},{label:"排序",prop:"sort"},{label:"是否默认",prop:"isDefault",type:"switch",fn:"trDefault",alias:"trDefault"},{label:"备注",prop:"remark"},{label:"创建时间",prop:"createTime",type:"time"},{label:"操作",prop:"action",width:"240",type:"action",btnGroup:[{label:"编辑",fn:"edit",type:"primary",alias:"edit"},{label:"详情",fn:"detail",type:"primary",alias:"detail"},{label:"删除",fn:"del",type:"danger",alias:"del"}]}],f=[{label:"固定域名地址",prop:"domainName"},{label:"排序",prop:"sort"},{label:"备注",prop:"remark"},{label:"创建时间",prop:"createTime",type:"time"}],b=[{label:"账号",prop:"account"},{label:"职务",prop:"jobName"},{label:"部门",prop:"deptName"},{label:"级别",prop:"isOwer",type:"filter",show_type:"textColorLine",width:"120",filters:[{text:"普通成员",val:0},{text:"部门负责人",val:1}]},{label:"备注",prop:"name"},{label:"添加时间",prop:"createTime",type:"time"},{label:"更新时间",prop:"updateTime",type:"time"},{label:"可用状态",prop:"status",type:"switch",fn:"switch",alias:"trswitch"},{label:"操作",width:"180",prop:"action",type:"action",btnGroup:[{label:"编辑",fn:"edit",type:"primary"},{label:"删除",fn:"del",type:"primary"}]}],h=[{type:"text",label:"搜索部门",prop:"name",value:"",width:"350px"}]},ed08:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("28a5"),r("f576"),r("a481"),r("6b54");var a=r("7618");function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"{y}/{m}/{d} {h}:{i}:{s}";if(0===arguments.length)return null;var r,o=t||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(a["a"])(e)?r=e:("string"===typeof e&&/^[0-9]+$/.test(e)&&(e=parseInt(e)),"number"===typeof e&&10===e.toString().length&&(e*=1e3),r=new Date(e));var n={y:r.getFullYear(),m:r.getMonth()+1,d:r.getDate(),h:r.getHours(),i:r.getMinutes(),s:r.getSeconds(),a:r.getDay()},i=o.replace(/{([ymdhisa])+}/g,(function(e,t){var r=n[t];return"a"===t?["日","一","二","三","四","五","六"][r]:r.toString().padStart(2,"0")}));return i=i.replace(/\//gi,"-"),i}},f36b:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"peopleManagement-container"},[r("div",{staticClass:"container-top"},[r("Bsearch",{attrs:{configs:e.searchCofig},on:{"do-search":e.doSearch,"do-reset":e.doReset}})],1),e._v(" "),r("div",{staticClass:"container-center"},[r("div",{staticClass:"center-sidebar"},[r("div",{staticClass:"center-sidebar-title"},[e._v("人员结构")]),e._v(" "),r("div",{staticClass:"center-sidebar-tree"},[r("el-tree",{ref:"sidebarTree",attrs:{"filter-node-method":e.filterNode,"default-expanded-keys":[1],draggable:!1,"allow-drop":e.collapse,data:e.treeData,"node-key":"roleId",props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.sidebarTreeClick,"node-drop":e.sort},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,o=t.data;return r("span",{staticClass:"custom-tree-node"},[r("span",{staticClass:"sac-label"},[e._v(" "+e._s(a.label)+" "),r("i",{directives:[{name:"show",rawName:"v-show",value:o.describe,expression:"data.describe"}],staticClass:"el-icon-info sac-icon",on:{click:function(t){return e.showDescription(o.describe)}}})]),e._v(" "),e.isOwer?r("span",{staticClass:"sac-btn"},[r("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommand}},[r("span",{staticClass:"el-dropdown-link"},[r("i",{staticClass:"el-icon-arrow-down el-icon-more"})]),e._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:{type:"add",node:a,data:o}}},[e._v("添加子部门")]),e._v(" "),r("el-dropdown-item",{attrs:{command:{type:"edit",node:a,data:o}}},[e._v("编辑部门")]),e._v(" "),r("el-dropdown-item",{attrs:{command:{type:"del",node:a,data:o}}},[e._v("删除部门")])],1)],1)],1):e._e()])}}])})],1)]),e._v(" "),e.contentIsShow&&e.userCreated?r("div",{staticClass:"center-content"},[e.isCURDAuth?r("div",{staticClass:"container-btn"},[e.userCreated?r("span",{staticClass:"btn-text"},[e._v(" "+e._s(e.currentData.name)+" ("+e._s(e.total)+"人) ")]):e._e(),e._v(" "),e.isOwer&&e.userCreated?r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.addpeopleManagement}},[e._v("添加成员")]):e._e()],1):e._e(),e._v(" "),r("div",[r("Btable",{attrs:{actionShow:e.isOwer,filter_type_value:e.filter_type_value,listLoading:e.listLoading,data:e.list,configs:e.configs},on:{"do-handle":e.doHandle}})],1),e._v(" "),r("div",{staticClass:"container-footer"},[r("icon-page",{attrs:{total:e.total,pages:e.pages}}),e._v(" "),r("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.current_page,"page-size":e.pageSize,total:e.total},on:{"current-change":e.goPage}})],1)]):e._e()]),e._v(" "),r("el-dialog",{attrs:{width:"600px",title:e.sidebarDialogTitle,visible:e.sidebarDialogVisible},on:{"update:visible":function(t){e.sidebarDialogVisible=t}}},[r("el-form",{ref:"sidebarForm",attrs:{model:e.sidebarForm,rules:e.sidebarRules}},[r("el-form-item",{attrs:{label:"子部门名称","label-width":e.formLabelWidth,prop:"name"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.sidebarForm.name,callback:function(t){e.$set(e.sidebarForm,"name",t)},expression:"sidebarForm.name"}})],1),e._v(" "),r("el-form-item",{staticClass:"tree-line",attrs:{label:"权限",prop:"menuId","label-width":e.formLabelWidth}},[r("el-tree",{ref:"tree",attrs:{accordion:!0,"check-strictly":!0,data:e.curChildrenMenu,"show-checkbox":"","node-key":"id",props:e.tree_props}})],1),e._v(" "),r("el-form-item",{attrs:{label:"是否可用","label-width":e.formLabelWidth,prop:"status"}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.sidebarForm.status,callback:function(t){e.$set(e.sidebarForm,"status",t)},expression:"sidebarForm.status"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"谷歌验证码","label-width":e.formLabelWidth,prop:"googleCode"}},[r("el-input",{attrs:{placeholder:"请输入"},on:{input:function(t){return e.checkVal("sidebarForm","googleCode")}},model:{value:e.sidebarForm.googleCode,callback:function(t){e.$set(e.sidebarForm,"googleCode","string"===typeof t?t.trim():t)},expression:"sidebarForm.googleCode"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.sidebarDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.sidebarBtnLoading},on:{click:e.sidebarConfirmOp}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{width:"600px",title:e.userDialogTitle,visible:e.userDialogVisible},on:{"update:visible":function(t){e.userDialogVisible=t}}},[r("el-form",{ref:"userForm",attrs:{model:e.userForm,rules:e.userRules}},[r("el-form-item",{attrs:{autocomplete:"off",label:"账号名","label-width":e.formLabelWidth,prop:"account"}},[r("el-row",{attrs:{span:24}},[r("el-col",{attrs:{span:10}},[e.accountType?r("el-select",{attrs:{disabled:e.oldType,filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入","remote-method":e.remoteMethod,loading:e.loading},on:{change:e.searchChange},model:{value:e.userForm.account,callback:function(t){e.$set(e.userForm,"account","string"===typeof t?t.trim():t)},expression:"userForm.account"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):r("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.userForm.account,callback:function(t){e.$set(e.userForm,"account","string"===typeof t?t.trim():t)},expression:"userForm.account"}})],1),e._v(" "),r("el-col",{attrs:{span:10}},[e.accountType?r("el-button",{attrs:{type:"success"},on:{click:e.changeAccountType}},[e._v("切换为普通")]):r("el-button",{attrs:{type:"primary"},on:{click:e.changeAccountType}},[e._v(" 切换为可搜索 ")])],1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth,prop:"password"}},[r("el-input",{attrs:{disabled:e.oldType,type:"password","auto-complete":"new-password",autocomplete:"off"},model:{value:e.userForm.password,callback:function(t){e.$set(e.userForm,"password","string"===typeof t?t.trim():t)},expression:"userForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"所属部门","label-width":e.formLabelWidth}},[r("el-input",{attrs:{type:"text",disabled:"",autocomplete:"off"},model:{value:e.curRoleName,callback:function(t){e.curRoleName=t},expression:"curRoleName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"职务","label-width":e.formLabelWidth,prop:"jobName"}},[r("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.userForm.jobName,callback:function(t){e.$set(e.userForm,"jobName",t)},expression:"userForm.jobName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth,prop:"name"}},[r("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.userForm.name,callback:function(t){e.$set(e.userForm,"name",t)},expression:"userForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"级别","label-width":e.formLabelWidth,prop:"isOwer"}},[r("el-radio",{attrs:{label:0,border:""},model:{value:e.userForm.isOwer,callback:function(t){e.$set(e.userForm,"isOwer",t)},expression:"userForm.isOwer"}},[e._v("普通成员")]),e._v(" "),r("el-radio",{attrs:{label:1,border:""},model:{value:e.userForm.isOwer,callback:function(t){e.$set(e.userForm,"isOwer",t)},expression:"userForm.isOwer"}},[e._v("部门负责人")])],1),e._v(" "),r("el-form-item",{staticClass:"tree-line",attrs:{label:"权限",prop:"menuId","label-width":e.formLabelWidth}},[r("el-tree",{ref:"userTree",attrs:{accordion:!0,"check-strictly":!0,data:e.currentData.childrenMenu,"show-checkbox":"","node-key":"id",props:e.tree_props}})],1),e._v(" "),r("el-form-item",{attrs:{label:""===e.userForm.userId?"新用户谷歌密钥":"谷歌密钥","label-width":e.formLabelWidth,prop:"googleCode"}},[r("el-input",{attrs:{disabled:e.oldType,autocomplete:"off"},model:{value:e.userForm.googleCode,callback:function(t){e.$set(e.userForm,"googleCode",t)},expression:"userForm.googleCode"}},[r("el-button",{staticClass:"gcode",attrs:{slot:"append",disabled:e.googleCodeDisable},on:{click:function(t){return t.stopPropagation(),e.getGoogleCode(t)}},slot:"append"},[e._v("获取密钥")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"谷歌验证码","label-width":e.formLabelWidth,prop:"adminGoogleCode"}},[r("el-input",{attrs:{placeholder:"请输入"},on:{input:function(t){return e.checkVal("userForm","adminGoogleCode")}},model:{value:e.userForm.adminGoogleCode,callback:function(t){e.$set(e.userForm,"adminGoogleCode","string"===typeof t?t.trim():t)},expression:"userForm.adminGoogleCode"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"是否可用","label-width":e.formLabelWidth,prop:"status"}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.userForm.status,callback:function(t){e.$set(e.userForm,"status",t)},expression:"userForm.status"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.userDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.userBtnLoading},on:{click:e.userConfirmOp}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{width:"500px",title:"确认删除?",visible:e.delDialogVisible},on:{"update:visible":function(t){e.delDialogVisible=t}}},[r("el-form",{ref:"delForm",attrs:{model:e.delForm,rules:e.delRules}},[r("el-form-item",{attrs:{label:e.delLabel,"label-width":e.formLabelWidth,prop:"account"}},[r("el-input",{attrs:{disabled:"",type:"text",autocomplete:"off"},model:{value:e.delForm.account,callback:function(t){e.$set(e.delForm,"account",t)},expression:"delForm.account"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"谷歌验证码","label-width":e.formLabelWidth,prop:"adminGoogleCode"}},[r("el-input",{attrs:{placeholder:"请输入"},on:{input:function(t){return e.checkVal("delForm","adminGoogleCode")}},model:{value:e.delForm.adminGoogleCode,callback:function(t){e.$set(e.delForm,"adminGoogleCode","string"===typeof t?t.trim():t)},expression:"delForm.adminGoogleCode"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.delDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.delBtnLoading},on:{click:e.delConfirmOp}},[e._v("确 定")])],1)],1)],1)},o=[],n=(r("ac4d"),r("8a81"),r("5df3"),r("1c4c"),r("6b54"),r("8e6e"),r("456d"),r("6762"),r("2fdb"),r("28a5"),r("7514"),r("a481"),r("7f7f"),r("ac6a"),r("96cf"),r("3b8d")),i=r("bd86"),s=r("c249"),l=r("2fee"),u=r("f21b"),c=r("cd08"),d=r("4ec3"),p=r("70ac"),m=r.n(p),g=r("2f62");function f(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=b(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,n=!0,i=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return n=e.done,e},e:function(e){i=!0,o=e},f:function(){try{n||null==a.return||a.return()}finally{if(i)throw o}}}}function b(e,t){if(e){if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w={name:"PeopleManagement",components:{Btable:l["a"],Bsearch:s["a"],iconPage:u["a"]},computed:y({},Object(g["c"])({isOwer:function(e){return!!e.app.isOwer}})),data:function(){return{delLabel:"",delDialogVisible:!1,delBtnLoading:!1,delForm:{},delRules:{adminGoogleCode:[{required:!0,message:"必填",trigger:"blur"}],account:[{required:!0,message:"必填",trigger:"blur"}]},filter_type_value:"",contentIsShow:!1,userRules:{name:[{required:!0,message:"必填",trigger:"blur"}],account:[{required:!0,message:"必填",trigger:"blur"},{validator:this.validateAccount,trigger:"blur"}],password:[{required:!0,message:"必填",trigger:"blur"},{validator:this.validatePassword,trigger:"blur"}],roleName:[{required:!0,message:"必填",trigger:"blur"}],jobName:[{required:!0,message:"必填",trigger:"blur"}],googleCode:[{required:!0,message:"必填",trigger:"blur"}],adminGoogleCode:[{required:!0,message:"必填",trigger:"blur"}]},userDialogTitle:"",userDialogVisible:!1,userForm:{},sidebarForm:{id:"",name:"",menuId:[],status:!1,googleCode:""},userBtnLoading:!1,sidebarDialogTitle:"",sidebarDialogVisible:!1,sidebarBtnLoading:!1,defaultProps:{children:"children",label:"name"},isCURDAuth:!0,listLoading:!1,list:[],searchCofig:[],configs:[],current_page:1,pageSize:this.$pageSize,total:0,pages:0,treeData:[],formName:"添加角色",formLabelWidth:"120px",currentNode:"",currentData:{},dialogTitle:"",rules:{name:[{required:!0,message:"必填",trigger:"blur"}]},sidebarRules:{name:[{required:!0,message:"必填",trigger:"blur"}],googleCode:[{required:!0,message:"必填",trigger:"blur"}]},sidebarTreeData:[{name:"董事会",children:[{name:"深圳集团"}]}],peopleManagementForm:{id:"",name:"",menuId:""},tree_props:{label:"name",children:"children"},ruleForm:{},currentForm:{},curChildrenMenu:[],result:[],userCreated:!0,options:[],loading:!1,accountTypeText:"切换为可搜索",accountType:!1,oldType:!1,curRoleName:"",googleCodeDisable:!1}},methods:{validateAccount:function(e,t,r){""==t?r(new Error("必填")):/^[A-Za-z]{1}[A-Za-z0-9]/.test(t)?r():r(new Error("只能输入字母和数字,以字母开头"))},validatePassword:function(e,t,r){""==t?r(new Error("必填")):/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/g.test(t)||"******"===t?r():r(new Error("请输入包含字母和数字的8-16位密码"))},changeAccountType:function(){var e=this;this.accountType=!this.accountType,this.accountType?this.$nextTick((function(){e.googleCodeDisable=!1,e.oldType=!1,e.userForm.name="",e.userForm.password="",e.userForm.account="",e.userForm.jobName="",e.userForm.isOwer=0,e.userForm.googleCode=""})):this.$nextTick((function(){e.googleCodeDisable=!1,e.oldType=!1,e.userForm.name="",e.userForm.password="",e.userForm.account="",e.userForm.jobName="",e.userForm.isOwer=0,e.userForm.googleCode="",e.userRules.password=[{required:!0,message:"必填",trigger:"blur"},{validator:e.validatePassword,trigger:"blur"}],e.userRules.account=[{required:!0,message:"必填",trigger:"blur"},{validator:e.validateAccount,trigger:"blur"}],e.userRules.password[0].required=!0,e.userRules.account[0].required=!0}))},searchChange:function(e){var t=this.options.filter((function(t){return t.id==e}))[0];console.log("obj",t),t&&(this.oldType=!0,this.$refs["userForm"].resetFields(),this.userRules.password[0].required=!1,this.userRules.account[0].required=!1,this.userForm.account=t.account,this.userForm.name=t.label||"",this.userForm.password=t.loginPassword,this.userForm.jobName=t.jobName||"",this.userForm.isOwer=t.isOwer||0,this.userForm.googleCode=t.googleCode,t.googleCode?this.googleCodeDisable=!0:this.googleCodeDisable=!1)},remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,this.userForm.account=e,setTimeout(Object(n["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.loading=!1,r.next=3,d["a"].apiPeopleManagementSearch({keyword:e});case 3:a=r.sent,a&&(t.options=a.data.data.filter((function(t){return t.account.toLowerCase().indexOf(e.toLowerCase())>-1})),t.options.forEach((function(e){e.label=e.account,e.value=e.id})));case 5:case"end":return r.stop()}}),r)}))),300)):this.options=[]},handleSelect:function(e){console.log(e)},delConfirmOp:function(){var e=this;this.$refs["delForm"].validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a,o,n,i,s,l,u,c,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=18;break}if(a=e.delForm.type,!e.delBtnLoading){t.next=4;break}return t.abrupt("return");case 4:if(1==a?(n=e.delForm,i=n.userId,s=n.adminGoogleCode,o={userId:i,adminGoogleCode:s}):(l=e.delForm,u=l.parentRoleIdPath,c=l.adminGoogleCode,o={parentRoleIdPath:u,adminGoogleCode:c}),e.delBtnLoading=!0,1!=a){t.next=12;break}return t.next=9,d["a"].apiDeleteUserPeopleManagement(o);case 9:t.t0=t.sent,t.next=15;break;case 12:return t.next=14,d["a"].apiDeletePeopleManagement(o);case 14:t.t0=t.sent;case 15:p=t.t0,p&&(e.$message({message:"删除成功",type:"success"}),e.delDialogVisible=!1,1==a?e.getList(e.currentData):e.getMenuList()),e.delBtnLoading=!1;case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getGoogleCode:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.userForm.account){e.next=3;break}return this.$message({message:"请先填写账号名",type:"error"}),e.abrupt("return");case 3:return e.next=5,d["a"].getGoogleCode({account:this.userForm.account});case 5:t=e.sent,t&&(this.userForm.googleCode=t.data.data.secretKey,this.$nextTick((function(){r.$refs.userForm.validateField("googleCode")})));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),sidebarTreeClick:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.currentData=JSON.parse(JSON.stringify(t)),0==this.currentData.level?this.userCreated=!1:this.userCreated=!0,this.filter_type_value=this.currentData.name,0!=this.currentData.level){e.next=5;break}return e.abrupt("return");case 5:this.getList(this.currentData);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),checkVal:function(e,t){this[e][t]=(this[e][t]+"").replace(/[^\d]/g,"")},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},sidebarConfirmOp:function(){var e=this;this.$refs["sidebarForm"].validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a,o,n,i,s,l,u,c,p,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=20;break}if(a=e.$refs["tree"].getCheckedKeys(),e.sidebarForm.menuId=a.join(","),o=e.sidebarForm,n=o.roleId,i=o.name,s=o.menuId,l=o.status,u=o.googleCode,!e.sidebarBtnLoading){t.next=6;break}return t.abrupt("return");case 6:if(c={name:i,menuId:s,googleCode:u,status:l?0:1,parentRoleId:e.currentData.roleId},e.sidebarBtnLoading=!0,n){t.next=14;break}return t.next=11,d["a"].apiAddPeopleManagementList(c);case 11:t.t0=t.sent,t.next=17;break;case 14:return t.next=16,d["a"].apiEditPeopleManagementList(y({roleId:n},c));case 16:t.t0=t.sent;case 17:p=t.t0,p&&(m=n?"编辑成功":"添加成功",e.$message({message:m,type:"success"}),e.sidebarDialogVisible=!1,e.getMenuList()),e.sidebarBtnLoading=!1;case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},userConfirmOp:function(){var e=this;this.accountType&&(this.userRules.password=[],this.userRules.account=[]),this.$refs["userForm"].validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a,o,n,i,s,l,u,c,p,g,f,b,h,v,w,C;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=21;break}if(a=e.$refs["userTree"].getCheckedKeys(),e.userForm.menuId=a.join(","),o=e.userForm,n=o.userId,i=o.menuId,s=o.name,l=o.roleId,u=o.password,c=o.account,p=o.jobName,g=o.isOwer,f=o.googleCode,b=o.adminGoogleCode,h=o.status,!e.userBtnLoading){t.next=6;break}return t.abrupt("return");case 6:if(v={account:c,menuId:i,name:s,roleName:e.curRoleName,jobName:p,isOwer:g,googleCode:f,adminGoogleCode:b,status:h?0:1,roleId:l},(n&&"******"!==u||!n)&&(e.accountType||(v.password=m.a.hbmd5(u))),e.userBtnLoading=!0,""!==n){t.next=15;break}return t.next=12,d["a"].apiAddUserPeopleManagementList(v);case 12:t.t0=t.sent,t.next=18;break;case 15:return t.next=17,d["a"].apiEditUserPeopleManagementList(y({userId:n},v));case 17:t.t0=t.sent;case 18:w=t.t0,w&&(C=""===n?"添加成功":"编辑成功",e.$message({message:C,type:"success"}),e.userDialogVisible=!1,e.getList(e.currentData),e.options=[]),e.userBtnLoading=!1;case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},showDescription:function(e){this.$alert(e,"描述",{showClose:!1,closeOnClickModal:!1}).catch((function(){}))},handleCommand:function(e){var t=this,r=e.type,a=e.node,o=e.data;if("add"==r){this.sidebarDialogTitle="创建 ".concat(o.name," 的子菜单"),this.sidebarDialogVisible=!0,this.currentNode=a;JSON.parse(JSON.stringify(o));this.$nextTick((function(){t.sidebarForm={id:"",name:"",menuId:"",status:!1,googleCode:""},t.$refs.sidebarForm.resetFields()})),this.$nextTick((function(){t.curChildrenMenu=t.currentData.childrenMenu,t.$refs.tree.setCheckedKeys([])}))}else if("edit"==r){this.sidebarDialogTitle="修改 ".concat(o.name," 菜单"),this.sidebarDialogVisible=!0;var n=JSON.parse(JSON.stringify(o));n.status=!n.status,0==this.currentData.level?this.curChildrenMenu=this.currentData.childrenMenu:this.curChildrenMenu=a.parent.data.childrenMenu,this.$nextTick((function(){t.currentData.level,t.find(t.currentData.childrenMenu,"id"),t.$refs.tree.setCheckedKeys(t.result)})),this.sidebarForm=n}else if("del"==r){if(o.children&&o.children.length>0)return void this.$message.error({title:"错误",message:"请先删除子菜单！"});this.delDialogVisible=!0,this.$nextTick((function(){t.delForm={type:2,parentRoleIdPath:o.parentRoleIdPath,account:o.name,adminGoogleCode:""},t.delLabel="部门名称",t.$refs["delForm"].resetFields()}),0)}},find:function(e,t){if(null==e)return null;var r,a=f(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;o.hasOwnProperty(t)&&this.result.push(o[t]),this.find(o.children,t)}}catch(n){a.e(n)}finally{a.f()}},collapse:function(e,t,r){},sort:function(e,t,r,a){},doSearch:function(e){if(this.current_page=1,this.search_params_obj.startTime||this.search_params_obj.endTime||(this.search_params_obj.flag=1),!this.currentData.hasOwnProperty("roleId"))return this.$message.error("请选择部门");0!=this.currentData.level&&this.getList(this.currentData)},doReset:function(){this.search_params_obj={},this.searchCofig.forEach((function(e){e["value"]=""})),this.currentData.hasOwnProperty("roleId")&&0!=this.currentData.level&&this.getList(this.currentData)},addpeopleManagement:function(){var e=this;this.userDialogTitle="添加成员",this.userDialogVisible=!0,this.accountType=!1,this.$nextTick((function(){e.$refs["userForm"].resetFields(),e.userForm={userId:"",name:"",password:"",account:"",jobName:"",menuId:"",isOwer:0,roleId:e.currentData.roleId,googleCode:"",adminGoogleCode:"",status:!1},e.curRoleName=e.currentData.name,e.userRules.password=[{required:!0,message:"必填",trigger:"blur"},{validator:e.validatePassword,trigger:"blur"}],e.userRules.account=[{required:!0,message:"必填",trigger:"blur"},{validator:e.validateAccount,trigger:"blur"}],e.userRules.password[0].required=!0,e.userRules.account[0].required=!0})),setTimeout((function(){e.$refs.userTree.setCheckedKeys([])}),0)},confirmOp:function(){var e=this;this.$refs["Form"].validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a,o,n,i,s,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=21;break}if(a=e.$refs["tree"].getCheckedKeys(),e.Form.menuId=a.join(","),o=e.Form,n=o.id,i=o.name,s=o.menuId,""!==n){t.next=13;break}return e.userBtnLoading=!0,t.next=8,d["a"].add({name:i,menuId:s});case 8:l=t.sent,l&&(e.$message({message:"新增角色成功",type:"success"}),e.userDialogVisible=!1,e.getMenuList()),e.userBtnLoading=!1,t.next=19;break;case 13:return e.userBtnLoading=!0,t.next=16,d["a"].edit({id:n,name:i,menuId:s});case 16:u=t.sent,u&&(e.$message({message:"编辑角色成功",type:"success"}),e.userDialogVisible=!1,e.getMenuList()),e.userBtnLoading=!1;case 19:t.next=22;break;case 21:return t.abrupt("return",!1);case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},doHandle:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,a,o,n,i,s,l,u,c,p,m,g,f,b,h,v,y=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.fn,a=t.row,"switch"!==r){e.next=7;break}return o={userId:a.userId,status:a.status?0:1},e.next=5,d["a"].apiSwitchUserPeopleManagementList(o);case 5:n=e.sent,n?(this.$message({message:n.data.message,type:"success"}),this.getList(this.currentData)):this.getList(this.currentData);case 7:"edit"===r&&(this.userDialogTitle="编辑成员",this.accountType=!1,this.userDialogVisible=!0,i=a.userId,s=a.name,l=a.password,u=a.account,c=a.deptName,p=a.jobName,m=a.menuIds,g=a.isOwer,f=a.roleId,b=a.googleCode,h=a.status,v=m.indexOf(",")>-1?m.split(","):[m],this.$nextTick((function(){y.$refs["userForm"].resetFields(),y.userForm={userId:i,name:s,password:l,account:u,jobName:p,menuId:"",isOwer:g,roleId:f,googleCode:b,status:h,adminGoogleCode:""},y.curRoleName=c}),0),setTimeout((function(){y.$refs.userTree.setCheckedKeys(v)}),0)),"del"===r&&(this.delDialogVisible=!0,this.$nextTick((function(){y.delForm={type:1,adminGoogleCode:"",account:a.account,userId:a.userId},y.delLabel="账号名称",y.$refs["delForm"].resetFields()}),0));case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),goPage:function(e){this.current_page=e,this.getList(this.currentData)},getList:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,a,o,n,i,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.listLoading){e.next=2;break}return e.abrupt("return");case 2:return r={pageNum:this.current_page,pageSize:this.pageSize,id:t.roleId,level:t.level,parentRoleIdPath:t.parentRoleIdPath},this.listLoading=!0,e.next=6,d["a"].apiGetPeopleManagementListById(r);case 6:a=e.sent,a?(o=a.data.data,n=o.records,i=o.total,s=o.current,l=o.pages,n.forEach((function(e){e["status"]=!e["status"]})),this.list=n,this.total=i,this.pages=l,this.current_page=s):(this.list=[],this.total=0,this.pages=0,this.current_page=1),this.contentIsShow=!0,this.listLoading=!1;case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getMenuList:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].apiGetPeopleManagementList({});case 2:t=e.sent,t&&(this.treeData=t.data.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),delSameItem:function(e,t){var r=[];return e.forEach((function(e){t.includes(e)||r.push(e)})),r}},mounted:function(){this.configs=c["l"],this.searchCofig=this.$util.clone(c["m"]),this.getMenuList(),this.$watch((function(){return this.searchCofig[0].value}),(function(e,t){this.$refs.sidebarTree.filter(e)}))}},C=w,F=(r("91f2"),r("0c7c")),k=Object(F["a"])(C,a,o,!1,null,null,null);t["default"]=k.exports},ff53:function(e,t,r){"use strict";var a=r("75fc");r("9278"),r("87f3"),r("a481"),r("6b54"),r("28a5"),r("c5f6");function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return+parseFloat(Number(e).toPrecision(t))}function n(e){var t=e.toString().split(/[eE]/),r=(t[0].split(".")[1]||"").length-+(t[1]||0);return r>0?r:0}function i(e){if(-1===e.toString().indexOf("e"))return Number(e.toString().replace(".",""));var t=n(e);return t>0?o(Number(e)*Math.pow(10,t)):Number(e)}function s(e){m&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&console.warn("".concat(e," is beyond boundary when transfer to integer, the results may not be accurate"))}function l(e,t){for(var r=arguments.length,o=new Array(r>2?r-2:0),u=2;u<r;u++)o[u-2]=arguments[u];if(o.length>0)return l.apply(void 0,[l(e,t),o[0]].concat(Object(a["a"])(o.slice(1))));var c=i(e),d=i(t),p=n(e)+n(t),m=c*d;return s(m),m/Math.pow(10,p)}function u(e,t){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];if(o.length>0)return u.apply(void 0,[u(e,t),o[0]].concat(Object(a["a"])(o.slice(1))));var s=Math.pow(10,Math.max(n(e),n(t)));return(l(e,s)+l(t,s))/s}function c(e,t){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];if(o.length>0)return c.apply(void 0,[c(e,t),o[0]].concat(Object(a["a"])(o.slice(1))));var s=Math.pow(10,Math.max(n(e),n(t)));return(l(e,s)-l(t,s))/s}function d(e,t){for(var r=arguments.length,u=new Array(r>2?r-2:0),c=2;c<r;c++)u[c-2]=arguments[c];if(u.length>0)return d.apply(void 0,[d(e,t),u[0]].concat(Object(a["a"])(u.slice(1))));var p=i(e),m=i(t);return s(p),s(m),l(p/m,o(Math.pow(10,n(t)-n(e))))}function p(e,t){var r=Math.pow(10,t);return d(Math.round(l(e,r)),r)}var m=!0;function g(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];m=e}t["a"]={strip:o,plus:u,minus:c,times:l,divide:d,round:p,digitLength:n,float2Fixed:i,enableBoundaryChecking:g}}}]);